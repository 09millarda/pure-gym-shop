{"version":3,"sources":["Layout/SideBar/SideBarMenuOption.tsx","Layout/SideBar/SideBar.tsx","Layout/BreadcrumbBar/BreadcrumbBar.tsx","Components/Listing.tsx","App/common/proxy.ts","App/common/errorMessage.ts","Views/Store/Listings/redux/listingsActions.ts","Components/LoadingWheel.tsx","Views/Store/Cart/redux/cartReducer.ts","Views/Store/Listings/redux/listingsReducer.ts","Views/ItemManagement/New/redux/newItemAction.ts","Views/ItemManagement/New/redux/newItemReducer.ts","Views/VoucherManagement/redux/voucherActions.ts","Views/VoucherManagement/redux/voucherReducer.ts","Views/SubsetsManagement/redux/subsetActions.ts","Views/SubsetsManagement/redux/subsetReducer.ts","App/redux/rootReducer.ts","App/redux/store.ts","App/common/cookieManager.ts","Views/Store/Cart/redux/cartActions.ts","Layout/PageTitle/PageTitle.tsx","Views/Store/Listings/Listings.tsx","Components/CartListing.tsx","Components/CartItemsTable.tsx","Views/Store/Cart/Cart.tsx","Views/Store/Store.tsx","Components/ApplyVoucherForm.tsx","Views/Checkout/Checkout.tsx","App/history.ts","Components/ItemManagementTable.tsx","Components/ItemEditForm.tsx","Views/ItemManagement/New/New.tsx","Views/ItemManagement/Edit/EditItem.tsx","Views/ItemManagement/ItemManagement.tsx","Components/OfferVoucherManagementTable.tsx","Views/VoucherManagement/Offer/OfferVoucherManagement.tsx","Components/GiftVoucherManagementTable.tsx","Views/VoucherManagement/Gift/GiftVoucherManagement.tsx","Views/VoucherManagement/VoucherManagement.tsx","Components/SubsetManagementTable.tsx","Components/SubsetEditForm.tsx","Views/SubsetsManagement/New/NewSubset.tsx","Views/SubsetsManagement/Edit/EditSubset.tsx","Views/SubsetsManagement/SubsetsManagement.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["SideBarMenuOption","option","react_default","a","createElement","react_router_dom","exact","to","rootUrl","index_es","icon","logo","className","title","SideBar","style","top","position","overflow","width","id","SideBar_SideBarMenuOption","faStoreAlt","faCashRegister","faDolly","faLayerGroup","faTags","BreadcrumbBar","Listing","props","backgroundImage","concat","imgUrl","backgroundRepeat","height","backgroundSize","price","toFixed","description","onClick","addToCart","faCartPlus","getDataUrl","window","location","hostname","showErrorAlert","body","swal","text","FETCH_ALL_LISTINGS","FETCHED_ALL_LISTINGS","fetchAllListings","_ref","Object","asyncToGenerator","regenerator_default","mark","_callee2","dispatch","url","wrap","_context2","prev","next","type","fetch","then","_ref2","_callee","response","listings","_context","json","sent","stop","_x2","apply","this","arguments","catch","err","_x","LoadingWheel","initialCartState","items","reducer","state","length","undefined","action","UPDATE_CART_ITEMS","objectSpread","cartItems","initialListingsState","isFetchingListings","UPDATE_NEW_ITEM","initialNewItemState","imageUri","FETCH_ALL_VOUCHERS","FETCHED_ALL_VOUCHERS","fetchAllVouchers","vouchers","initialVoucherState","giftVouchers","offerVouchers","isFetchingVouchers","FETCH_ALL_SUBSETS","FETCHED_ALL_SUBSETS","UPDATE_NEW_SUBSET","fetchAllSubsets","res","subsets","showErrorMessage","initialSubsetReducer","isFetchingSubsets","newSubsetState","name","itemIds","combineReducers","cartState","cartReducer","listingsState","listingsReducer","newItemState","unitPrice","voucherState","subsetState","ReduxStore","createStore","rootReducer","composeWithDevTools","applyMiddleware","thunk","CART_ITEMS_COOKIE_NAME","setCartCookie","expiresInDays","Cookies","JSON","stringify","expires","updateCart","alterCartQuantity","quantity","listing","getState","find","l","itemId","slice","cartItem","i","push","PageTitle","connect","useEffect","PageTitle_PageTitle","map","Components_Listing","key","Components_LoadingWheel","CartListing","_useState","useState","toString","_useState2","slicedToArray","localQuantity","setLocalQuantity","readonly","step","min","maxWidth","value","onChange","e","target","onBlur","validity","valid","parseInt","updateCartListingQuantity","pattern","parseFloat","padding","removeFromCart","CartItemsTable","cartItemElements","forEach","item","Components_CartListing","generateCartItemListings","isFetching","colSpan","removeItemsWithId","filter","removeItemFromCart","alterItemQuantity","Components_CartItemsTable","total","calculateBasketTotal","Store","Listings_Listings","Cart_Cart","ApplyVoucherForm","voucherCodes","setVoucherCodes","_useState3","_useState4","voucherInput","setVoucherInput","_useState5","_useState6","voucherInputError","setVoucherInputError","_onFormSubmit","codes","preventDefault","abrupt","indexOf","applyVouchers","_applyVouchers","_callee3","_context3","fetchDataUrl","method","headers","Content-Type","itemIdQuantities","q","status","updateAppliedVouchers","_x3","_clearVouchers","_callee4","_context4","role","onSubmit","cartListings","setCartListings","isFetchingCartListings","setIsFetchingCartListings","appliedVouchers","setAppliedVouchers","_fetchItemsByIds","join","finally","calculateSubTotal","basketTotal","reduce","t","n","discount","mapGiftVouchers","itemType","quantifiedVouchers","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_loop","_item","code","voucherType","voucherId","_iterator","Symbol","iterator","done","return","_buyItems","g","href","fetchItemsByIds","Components_ApplyVoucherForm","margin","appliedVoucher","createBrowserHistory","ItemManagementTableRow","history","cursor","ItemManagementTable","ItemEditForm","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","validateForm","isValid","setState","titleError","priceError","descriptionError","imageError","form","clearImage","updateImage","file","files","includes","reader","FileReader","readAsDataURL","onload","result","formChanged","onerror","updateForm","onBlurPrice","updatePrice","updateTitle","updateDescription","bind","assertThisInitialized","nextProps","maxLength","readOnly","accept","Fragment","multiple","src","maxHeight","rows","minHeight","React","PureComponent","updateNewItemForm","updateNewItemFormState","fetchAllItems","formRef","createRef","isSaving","setIsSaving","_onSave","current","dangerMode","buttons","Components_ItemEditForm","ref","disabled","EditItem","deleteItem","isDeleting","match","params","updateItem","_ref4","handleFormChange","isEditing","_this2","Components_ItemManagementTable","react_router","path","component","NewItem","OfferVoucherManagementTableRow","minBasketPrice","itemSubset","deleteVoucher","OfferVoucherManagementTable","saveOfferVoucher","codeError","s","subsetError","valueError","minPriceToApply","subsetGroup","fetchVouchers","onSubsetChange","updateCode","updateValue","onBlurValue","updateMinBasketPrice","minBasketPriceError","onBlurMinBasketPrice","_ref3","list","subsetId","isLoadingVouchers","v","fetchSubsets","Components_OfferVoucherManagementTable","GiftVoucherManagementTableRow","GiftVoucherManagementTable","saveGiftVoucher","Components_GiftVoucherManagementTable","OfferVoucherManagement","GiftVoucherManagement","SubsetManagementTableRow","SubsetManagementTable","subset","SubsetEditForm","nameError","addItem","removeItem","updateName","isFetchingItems","updateNewSubsetForm","updateNewSubsetFormState","Components_SubsetEditForm","EditSubset","deleteSubset","updateSubset","Components_SubsetManagementTable","NewSubset","App","parse","getCartCookie","setCart","SideBar_SideBar","marginTop","BreadcrumbBar_BreadcrumbBar","SubSetsManagement","ItemManagement","from","VoucherManagement","Checkout","Component","Boolean","ReactDOM","render","es","store","src_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.dfc06f1f.chunk.js","sourcesContent":["import { ISideBarMenuOption } from \"../../App/index\";\r\nimport React from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { NavLink as Link } from \"react-router-dom\";\r\n\r\nfunction SideBarMenuOption(option: ISideBarMenuOption): JSX.Element {\r\n  return (\r\n    <li>\r\n      <Link exact={option.exact == null ? true : option.exact} to={option.rootUrl}>\r\n        <FontAwesomeIcon\r\n          icon={option.logo}\r\n        />\r\n        <span className=\"ml-3\">{option.title}</span>\r\n      </Link>\r\n    </li>\r\n  );\r\n}\r\n\r\nexport default SideBarMenuOption;","import React from \"react\";\r\nimport SideBarMenuOption from \"./SideBarMenuOption\";\r\nimport { faTags, faStoreAlt, faDolly, faCashRegister, faLayerGroup } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nfunction SideBar(): JSX.Element {\r\n  return (\r\n    <div\r\n      className=\"left side-menu\"\r\n      style={{\r\n        top: \"0px\"\r\n      }}\r\n    >\r\n      <div\r\n        style={{\r\n          position: \"relative\",\r\n          overflow: \"inherit\",\r\n          width: \"auto\"\r\n        }}\r\n      >\r\n        <div\r\n          className=\"sidebar-inner\"\r\n          style={{\r\n            overflow: \"hidden\",\r\n            width: \"auto\"\r\n          }}\r\n        >\r\n          <div id=\"sidebar-menu\">\r\n            <ul>\r\n              <li className=\"menu-title\">Store</li>\r\n              <SideBarMenuOption\r\n                title=\"Store\"\r\n                logo={faStoreAlt}\r\n                rootUrl=\"/\"\r\n              />\r\n              <SideBarMenuOption\r\n                title=\"Checkout\"\r\n                logo={faCashRegister}\r\n                rootUrl=\"/checkout\"\r\n              />\r\n              <li className=\"menu-title\">Admin</li>\r\n              <SideBarMenuOption\r\n                title=\"Item Management\"\r\n                logo={faDolly}\r\n                rootUrl=\"/item-management\"\r\n                exact={false}\r\n              />\r\n              <SideBarMenuOption\r\n                title=\"Subset Management\"\r\n                logo={faLayerGroup}\r\n                rootUrl=\"/subset-management\"\r\n                exact={false}\r\n              />\r\n              <SideBarMenuOption\r\n                title=\"Voucher Management\"\r\n                logo={faTags}\r\n                exact={false}\r\n                rootUrl=\"/voucher-management\"\r\n              />\r\n            </ul>\r\n            <div className=\"clearfix\"></div>\r\n          </div>\r\n          <div className=\"clearfix\"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SideBar;","import React from \"react\";\r\n\r\nfunction BreadcrumbBar(): JSX.Element {\r\n  return (\r\n    <div className=\"row\">\r\n      <div className=\"col-sm-12\">\r\n        <div className=\"page-title-box\">\r\n          <h4 className=\"page-title\">Pure Gym Store</h4>\r\n          <div className=\"clearfix\"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default BreadcrumbBar;","import React from \"react\";\r\nimport { IListing } from \"../App/index\";\r\nimport { faCartPlus } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\n\r\nfunction Listing(props: IListing): JSX.Element {\r\n  return (\r\n    <div className=\"col-sm-4\">\r\n      <div className=\"gal-detail thumb\">\r\n        <div\r\n          style={{\r\n            backgroundImage: `url(${props.imgUrl})`,\r\n            backgroundRepeat: \"no-repeat\",\r\n            width: \"100%\",\r\n            height: \"300px\",\r\n            backgroundSize: \"100% auto\"\r\n          }}\r\n        />\r\n        <h4 className=\"text-center\">{props.title}</h4><p className=\"text-muted text-center\">£{props.price.toFixed(2)}</p>\r\n        <div className=\"ga-border\"></div>\r\n        <p>{props.description}</p>\r\n        <button\r\n          className=\"btn btn-info float-right mt-2\"\r\n          onClick={() => props.addToCart(props.id)}\r\n        >\r\n          <FontAwesomeIcon\r\n            icon={faCartPlus}\r\n          />\r\n          <span className=\"ml-2\">Add</span>\r\n        </button>\r\n        <div className=\"clearfix\"></div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Listing;","function getDataUrl(): string {\r\n  const hostName: string = window.location.hostname;\r\n\r\n  switch (hostName) {\r\n    case \"puregymshop.alistairmillard.me\":\r\n      return \"/api\";\r\n    default:\r\n      return \"https://localhost:5001/api\";\r\n  }\r\n}\r\n\r\nexport default getDataUrl;","import swal from \"sweetalert\";\r\n\r\nfunction showErrorAlert(title: string, body: string): void {\r\n  swal({\r\n    icon: \"error\",\r\n    title,\r\n    text: body\r\n  });\r\n}\r\n\r\nexport default showErrorAlert;","import { AnyAction } from \"redux\";\r\nimport { ThunkResult, IListingState } from \"../../../../App/index\";\r\nimport getDataUrl from \"../../../../App/common/proxy\";\r\nimport showErrorAlert from \"../../../../App/common/errorMessage\";\r\n\r\nexport const FETCH_ALL_LISTINGS: string = \"FETCH_ALL_LISTINGS\";\r\nexport const FETCHED_ALL_LISTINGS: string = \"FETCHED_ALL_LISTINGS\";\r\n\r\nexport function fetchAllListings(): ThunkResult<void> {\r\n  return async (dispatch) => {\r\n    dispatch({\r\n      type: FETCH_ALL_LISTINGS\r\n    });\r\n\r\n    const url: string = `${getDataUrl()}/items`;\r\n    fetch(url)\r\n      .then(async (response) => {\r\n        const listings: IListingState[] = await response.json();\r\n        dispatch({\r\n          type: FETCHED_ALL_LISTINGS,\r\n          listings\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        showErrorAlert(\"An error occured fetching listings\", `${err}`);\r\n      });\r\n  };\r\n}","import React from \"react\";\r\nimport \"./LoadingWheel.css\";\r\n\r\nfunction LoadingWheel(): JSX.Element {\r\n  return (\r\n    <div className=\"row\">\r\n      <div className=\"col-12 text-center\">\r\n        <div className=\"loader\"></div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default LoadingWheel;","import { ICartState } from \"../../../../App/index\";\r\nimport { AnyAction } from \"redux\";\r\nimport { UPDATE_CART_ITEMS } from \"./cartActions\";\r\n\r\nexport const initialCartState: ICartState = {\r\n  items: []\r\n};\r\n\r\nfunction reducer(state: ICartState = initialCartState, action: AnyAction): ICartState {\r\n  switch(action.type) {\r\n    case UPDATE_CART_ITEMS:\r\n      return {...state, items: action.cartItems};\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default reducer;","import { IListingsState } from \"../../../../App/index\";\r\nimport { AnyAction } from \"redux\";\r\nimport { FETCH_ALL_LISTINGS, FETCHED_ALL_LISTINGS } from \"./listingsActions\";\r\n\r\nexport const initialListingsState: IListingsState = {\r\n  listings: [],\r\n  isFetchingListings: false\r\n};\r\n\r\nfunction reducer(state: IListingsState = initialListingsState, action: AnyAction): IListingsState {\r\n  switch(action.type) {\r\n    case FETCH_ALL_LISTINGS:\r\n      return {...state, isFetchingListings: true};\r\n    case FETCHED_ALL_LISTINGS:\r\n      return {...state, isFetchingListings: false, listings: action.listings};\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default reducer;","import { AnyAction } from \"redux\";\r\n\r\nexport const UPDATE_NEW_ITEM: string = \"UPDATE_NEW_ITEM\";\r\n\r\nexport function updateNewItemFormState(title: string, price: number, description: string, imageUri: string): AnyAction {\r\n  return {\r\n    type: UPDATE_NEW_ITEM,\r\n    title,\r\n    price,\r\n    description,\r\n    imageUri\r\n  };\r\n}","import { INewItemState } from \"../../../../App/index\";\r\nimport { AnyAction } from \"redux\";\r\nimport { UPDATE_NEW_ITEM } from \"./newItemAction\";\r\n\r\nexport const initialNewItemState: INewItemState = {\r\n  description: \"\",\r\n  title: \"\",\r\n  imageUri: \"\"\r\n};\r\n\r\nexport default function newItemReducer(state: INewItemState = initialNewItemState, action: AnyAction): INewItemState {\r\n  switch (action.type) {\r\n    case UPDATE_NEW_ITEM:\r\n      return {...state, title: action.title, unitPrice: action.price, description: action.description, imageUri: action.imageUri};\r\n    default:\r\n      return state;\r\n  }\r\n}","import { ThunkResult } from \"../../../App/index\";\r\nimport getDataUrl from \"../../../App/common/proxy\";\r\nimport showErrorAlert from \"../../../App/common/errorMessage\";\r\n\r\nexport const FETCH_ALL_VOUCHERS: string = \"FETCH_ALL_VOUCHERS\";\r\nexport const FETCHED_ALL_VOUCHERS: string = \"FETCHED_ALL_VOUCHERS\";\r\n\r\nexport function fetchAllVouchers(): ThunkResult<void> {\r\n  return async (dispatch) => {\r\n    dispatch({\r\n      type: FETCH_ALL_VOUCHERS\r\n    });\r\n\r\n    const url: string = `${getDataUrl()}/vouchers`;\r\n    fetch(url)\r\n      .then(async (response) => {\r\n        const vouchers: any = await response.json();\r\n        dispatch({\r\n          type: FETCHED_ALL_VOUCHERS,\r\n          vouchers\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        showErrorAlert(\"An error occured fetching vouchers\", `${err}`);\r\n      });\r\n  };\r\n}","import { IVoucherState } from \"../../../App/index\";\r\nimport { AnyAction } from \"redux\";\r\nimport { FETCH_ALL_VOUCHERS, FETCHED_ALL_VOUCHERS } from \"./voucherActions\";\r\n\r\nexport const initialVoucherState: IVoucherState = {\r\n  vouchers: {\r\n    giftVouchers: [],\r\n    offerVouchers: []\r\n  },\r\n  isFetchingVouchers: false\r\n};\r\n\r\nexport default function voucherStateReducer(state: IVoucherState = initialVoucherState, action: AnyAction): IVoucherState {\r\n  switch (action.type) {\r\n    case FETCH_ALL_VOUCHERS:\r\n      return {...state, isFetchingVouchers: true};\r\n    case FETCHED_ALL_VOUCHERS:\r\n      return {...state, isFetchingVouchers: false, vouchers: action.vouchers};\r\n    default:\r\n      return state;\r\n  }\r\n}","import { AnyAction } from \"redux\";\r\nimport { ThunkResult, IListingState } from \"../../../App/index\";\r\nimport getDataUrl from \"../../../App/common/proxy\";\r\nimport showErrorMessage from \"../../../App/common/errorMessage\";\r\n\r\nexport const FETCH_ALL_SUBSETS: string = \"FETCH_ALL_SUBSETS\";\r\nexport const FETCHED_ALL_SUBSETS: string = \"FETCHED_ALL_SUBSETS\";\r\nexport const UPDATE_NEW_SUBSET: string = \"UPDATE_NEW_SUBSET\";\r\n\r\nexport function fetchAllSubsets(): ThunkResult<void> {\r\n  return async (dispatch) => {\r\n    dispatch({\r\n      type: FETCH_ALL_SUBSETS\r\n    });\r\n\r\n    const url: string = `${getDataUrl()}/subsets`;\r\n    fetch(url)\r\n      .then(async (res) => {\r\n        const subsets = await res.json();\r\n        dispatch({\r\n          type: FETCHED_ALL_SUBSETS,\r\n          subsets\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        showErrorMessage(\"Failed to fetch subsets\", err);\r\n      });\r\n  };\r\n}\r\n\r\nexport function updateNewSubsetFormState(name: string, itemIds: number[]): AnyAction {\r\n  return {\r\n    type: UPDATE_NEW_SUBSET,\r\n    name,\r\n    itemIds\r\n  };\r\n}","import { ISubsetManagementState } from \"../../../App/index\";\r\nimport { AnyAction } from \"redux\";\r\nimport { FETCH_ALL_SUBSETS, FETCHED_ALL_SUBSETS, UPDATE_NEW_SUBSET } from \"./subsetActions\";\r\n\r\nexport const initialSubsetReducer: ISubsetManagementState = {\r\n  subsets: [],\r\n  isFetchingSubsets: false,\r\n  newSubsetState: {\r\n    name: \"\",\r\n    itemIds: []\r\n  }\r\n};\r\n\r\nexport default function(state: ISubsetManagementState = initialSubsetReducer, action: AnyAction): ISubsetManagementState {\r\n  switch (action.type) {\r\n    case FETCH_ALL_SUBSETS:\r\n      return {...state, isFetchingSubsets: true};\r\n    case FETCHED_ALL_SUBSETS:\r\n      return {...state, isFetchingSubsets: false, subsets: action.subsets};\r\n    case UPDATE_NEW_SUBSET:\r\n      return {...state, newSubsetState: {...state.newSubsetState, name: action.name, itemIds: action.itemIds}};\r\n    default:\r\n      return state;\r\n  }\r\n}","import cartReducer, { initialCartState } from \"../../Views/Store/Cart/redux/cartReducer\";\r\nimport listingsReducer, { initialListingsState } from \"../../Views/Store/Listings/redux/listingsReducer\";\r\nimport newItemReducer, { initialNewItemState } from \"../../Views/ItemManagement/New/redux/newItemReducer\";\r\nimport voucherReducer, { initialVoucherState } from \"../../Views/VoucherManagement/redux/voucherReducer\";\r\nimport subsetReducer, { initialSubsetReducer } from \"../../Views/SubsetsManagement/redux/subsetReducer\";\r\nimport { combineReducers } from \"redux\";\r\nimport { IReduxState } from \"../index\";\r\n\r\nexport const initialState: IReduxState = {\r\n  cartState: initialCartState,\r\n  listingsState: initialListingsState,\r\n  newItemState: initialNewItemState,\r\n  voucherState: initialVoucherState,\r\n  subsetState: initialSubsetReducer\r\n};\r\n\r\nexport default combineReducers<IReduxState>({\r\n  cartState: cartReducer,\r\n  listingsState: listingsReducer,\r\n  newItemState: newItemReducer,\r\n  voucherState: voucherReducer,\r\n  subsetState: subsetReducer\r\n});","import { createStore, applyMiddleware, Store, AnyAction } from \"redux\";\r\nimport rootReducer from \"./rootReducer\";\r\nimport { IReduxState } from \"../index\";\r\nimport thunk from \"redux-thunk\";\r\nimport { composeWithDevTools } from \"redux-devtools-extension\";\r\n\r\nfunction configureStore(): Store<IReduxState, AnyAction> {\r\n  return createStore(\r\n    rootReducer,\r\n    composeWithDevTools(\r\n      applyMiddleware(thunk)\r\n    )\r\n  );\r\n}\r\n\r\nexport const ReduxStore: Store<IReduxState, AnyAction> = configureStore();","import { ICartListingState } from \"../index\";\r\nimport * as Cookies from \"js-cookie\";\r\n\r\nconst CART_ITEMS_COOKIE_NAME: string = \"CART_ITEMS_COOKIE\";\r\n\r\nexport function setCartCookie(cartItems: ICartListingState[], expiresInDays: number): void {\r\n  Cookies.set(CART_ITEMS_COOKIE_NAME, JSON.stringify(cartItems), {\r\n    expires: expiresInDays\r\n  });\r\n}\r\n\r\nexport function getCartCookie(): ICartListingState[] {\r\n  const items: string | undefined = Cookies.get(CART_ITEMS_COOKIE_NAME);\r\n  if (items == null) {\r\n    return [];\r\n  } else {\r\n    return JSON.parse(items);\r\n  }\r\n}","import { AnyAction } from \"redux\";\r\nimport { ReduxStore } from \"../../../../App/redux/store\";\r\nimport { IListingState, ICartListingState } from \"../../../../App/index\";\r\nimport { setCartCookie } from \"../../../../App/common/cookieManager\";\r\n\r\nexport const UPDATE_CART_ITEMS: string = \"UPDATE_CART_ITEMS\";\r\n\r\nexport function updateCart(cartItems: ICartListingState[]): AnyAction {\r\n  setCartCookie(cartItems, 7);\r\n  return {\r\n    type: UPDATE_CART_ITEMS,\r\n    cartItems\r\n  };\r\n}\r\n\r\nexport function alterCartQuantity(id: number, quantity: number): AnyAction {\r\n  const listings: IListingState[] = ReduxStore.getState().listingsState.listings;\r\n  const listing: IListingState | undefined = listings.find(l => l.itemId === id);\r\n  if (listing == null) {\r\n    return {\r\n      type: \"_default\"\r\n    };\r\n   }\r\n\r\n  const cartItems: ICartListingState[] = ReduxStore.getState().cartState.items.slice();\r\n  const cartItem: ICartListingState | undefined = cartItems.find(i => i.id === listing.itemId);\r\n\r\n  if (cartItem == null) {\r\n    cartItems.push({\r\n      id: listing.itemId,\r\n      quantity: quantity\r\n    });\r\n  } else {\r\n    cartItem.quantity = quantity;\r\n  }\r\n\r\n  return updateCart(cartItems);\r\n}\r\n\r\nexport function addToCart(id: number): AnyAction {\r\n  const cartItem: ICartListingState | undefined = ReduxStore.getState().cartState.items.find(i => i.id === id);\r\n\r\n  if (cartItem == null) {\r\n    return alterCartQuantity(id, 1);\r\n  } else {\r\n    return alterCartQuantity(id, cartItem.quantity + 1);\r\n  }\r\n}\r\n\r\nexport function removeItemFromCart(id: number): AnyAction {\r\n  const cartItems: ICartListingState[] = ReduxStore.getState().cartState.items.slice().filter(i => i.id !== id);\r\n\r\n  return updateCart(cartItems);\r\n}","import React from \"react\";\r\n\r\ninterface IPageTitleProps {\r\n  title: string;\r\n}\r\n\r\nfunction PageTitle(props: IPageTitleProps): JSX.Element {\r\n  return (\r\n    <ul className=\"nav nav-tabs tabs-bordered\">\r\n      <li className=\"nav-item\">\r\n        <a className=\"nav-link active\">{props.title}</a>\r\n      </li>\r\n    </ul>\r\n  );\r\n}\r\n\r\nexport default PageTitle;","import React, { useEffect } from \"react\";\r\nimport Listing from \"../../../Components/Listing\";\r\nimport { IListingState, IReduxState } from \"../../../App/index\";\r\nimport { fetchAllListings } from \"./redux/listingsActions\";\r\nimport { connect } from \"react-redux\";\r\nimport LoadingWheel from \"../../../Components/LoadingWheel\";\r\nimport { addToCart } from \"../Cart/redux/cartActions\";\r\nimport PageTitle from \"../../../Layout/PageTitle/PageTitle\";\r\n\r\ninterface IListingsStateProps {\r\n  isFetchingListings: boolean;\r\n  listings: IListingState[];\r\n}\r\n\r\ninterface IListingsDispatchProps {\r\n  fetchAllListings: () => void;\r\n  addToCart: (id: number) => void;\r\n}\r\n\r\ntype IListingsProps = IListingsStateProps & IListingsDispatchProps;\r\n\r\nfunction Listings(props: IListingsProps): JSX.Element {\r\n  useEffect(() => {\r\n    props.fetchAllListings();\r\n  }, []);\r\n\r\n  function addToCart(id: number): void {\r\n    props.addToCart(id);\r\n  }\r\n\r\n  return (\r\n    <div className=\"card-box\">\r\n      <PageTitle\r\n        title=\"LISTINGS\"\r\n      />\r\n      <div className=\"row\">\r\n        {\r\n          props.listings.map((listing, i) =>\r\n            <Listing\r\n              key={i}\r\n              description={listing.description}\r\n              imgUrl={listing.imageUri}\r\n              price={listing.price}\r\n              title={listing.name}\r\n              addToCart={addToCart}\r\n              id={listing.itemId}\r\n            />\r\n          )\r\n        }\r\n        {\r\n          props.listings.length === 0 && !props.isFetchingListings &&\r\n          <p className=\"col-12 mt-3\">No Listings</p>\r\n        }\r\n        {\r\n          props.isFetchingListings &&\r\n          <div className=\"col-12\">\r\n            <LoadingWheel />\r\n          </div>\r\n        }\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction mapStateToProps(state: IReduxState): IListingsStateProps {\r\n  return {\r\n    isFetchingListings: state.listingsState.isFetchingListings,\r\n    listings: state.listingsState.listings\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: any): IListingsDispatchProps {\r\n  return {\r\n    fetchAllListings: () => dispatch(fetchAllListings()),\r\n    addToCart: (id: number) => dispatch(addToCart(id))\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Listings);","import React, { useState, useEffect } from \"react\";\r\n\r\ninterface ICartListing {\r\n  id: number;\r\n  removeFromCart?: (id: number) => void;\r\n  updateCartListingQuantity?: (id: number, quantity: number) => void;\r\n  title: string;\r\n  unitPrice: number;\r\n  quantity: number;\r\n  readonly: boolean | undefined;\r\n}\r\n\r\nfunction CartListing(props: ICartListing): JSX.Element {\r\n  const [localQuantity, setLocalQuantity] = useState(props.quantity.toString());\r\n\r\n  useEffect(() => {\r\n    setLocalQuantity(props.quantity.toString());\r\n  }, [\r\n    props.quantity\r\n  ]);\r\n\r\n  function calculateTotalPrice(unitPrice: number, quantity: number): number {\r\n    return parseFloat((unitPrice * quantity).toFixed(2));\r\n  }\r\n\r\n  function updateQuantity(e: React.ChangeEvent<HTMLInputElement>): void {\r\n    const quantity: number = e.target.validity.valid && e.target.value.length > 0 ? parseInt(e.target.value, 10) : 1;\r\n    if (props.updateCartListingQuantity) {\r\n      props.updateCartListingQuantity(props.id, quantity);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <tr>\r\n      <td>{props.title}</td>\r\n      <td>\r\n        {\r\n          !props.readonly &&\r\n          <input\r\n            type=\"number\"\r\n            step={1}\r\n            min={1}\r\n            className=\"form-control\"\r\n            style={{\r\n              maxWidth: \"70px\"\r\n            }}\r\n            value={localQuantity}\r\n            onChange={(e) => setLocalQuantity(e.target.value)}\r\n            onBlur={updateQuantity}\r\n            pattern=\"[0-9]+\"\r\n          />\r\n        }\r\n        {\r\n          props.readonly && localQuantity\r\n        }\r\n      </td>\r\n      <td>£{props.unitPrice}</td>\r\n      <td>£{calculateTotalPrice(props.unitPrice, props.quantity)}</td>\r\n      {\r\n        !props.readonly &&\r\n        <td>\r\n          <button\r\n            className=\"btn btn-link\"\r\n            style={{\r\n              padding: \"0px\"\r\n            }}\r\n            onClick={() => props.removeFromCart ? props.removeFromCart(props.id) : null}\r\n          >Remove</button>\r\n        </td>\r\n      }\r\n    </tr>\r\n  );\r\n}\r\n\r\nexport default CartListing;","import { ICartListingState, IListingState } from \"../App/index\";\r\nimport React from \"react\";\r\nimport CartListing from \"./CartListing\";\r\nimport LoadingWheel from \"./LoadingWheel\";\r\n\r\ninterface ICartItemsProps {\r\n  items: ICartListingState[];\r\n  listings: IListingState[];\r\n  removeFromCart?: (id: number) => void;\r\n  updateCartListingQuantity?: (id: number, quantity: number) => void;\r\n  readonly?: boolean;\r\n  isFetching?: boolean;\r\n}\r\n\r\nfunction CartItemsTable(props: ICartItemsProps): JSX.Element {\r\n  function generateCartItemListings(cartItems: ICartListingState[], listings: IListingState[]): JSX.Element[] {\r\n    const cartItemElements: JSX.Element[] = [];\r\n\r\n    cartItems.forEach((item, i) => {\r\n      const listing: IListingState | undefined = listings.find(l => l.itemId === item.id);\r\n      if (listing != null) {\r\n        cartItemElements.push(\r\n          <CartListing\r\n            id={listing.itemId}\r\n            key={i}\r\n            quantity={item.quantity}\r\n            removeFromCart={props.removeFromCart}\r\n            title={listing.name}\r\n            unitPrice={listing.price}\r\n            updateCartListingQuantity={props.updateCartListingQuantity}\r\n            readonly={props.readonly}\r\n          />\r\n        );\r\n      }\r\n    });\r\n\r\n    return cartItemElements;\r\n  }\r\n\r\n  return (\r\n    <div className=\"row\">\r\n      <div className=\"col-12\">\r\n        <div className=\"table-container table-responsive mt-3\">\r\n          <table className=\"table table-hover\">\r\n            <thead>\r\n              <tr>\r\n                <th>Item</th>\r\n                <th>Quantity</th>\r\n                <th>Unit Cost</th>\r\n                <th>Total</th>\r\n                {\r\n                  !props.readonly &&\r\n                  <th></th>\r\n                }\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {\r\n                generateCartItemListings(props.items, props.listings)\r\n              }\r\n              {\r\n                (props.items.length === 0 || props.listings.length === 0) && !props.isFetching &&\r\n                <tr>\r\n                  <td colSpan={props.readonly ? 5 : 4}>\r\n                    No items in cart\r\n                  </td>\r\n                </tr>\r\n              }\r\n              {\r\n                props.isFetching &&\r\n                <tr>\r\n                  <td colSpan={props.readonly ? 5 : 4}>\r\n                    <LoadingWheel />\r\n                  </td>\r\n                </tr>\r\n              }\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CartItemsTable;","import React from \"react\";\r\nimport { ICartListingState, IReduxState, IListingState } from \"../../../App/index\";\r\nimport { connect } from \"react-redux\";\r\nimport { removeItemFromCart, alterCartQuantity } from \"./redux/cartActions\";\r\nimport { Link } from \"react-router-dom\";\r\nimport CartItemsTable from \"../../../Components/CartItemsTable\";\r\nimport PageTitle from \"../../../Layout/PageTitle/PageTitle\";\r\n\r\ninterface ICartStateProps {\r\n  items: ICartListingState[];\r\n  listings: IListingState[];\r\n}\r\n\r\ninterface ICartDispatchProps {\r\n  removeItemsWithId: (id: number) => void;\r\n  alterItemQuantity: (id: number, quantity: number) => void;\r\n}\r\n\r\ntype ICartProps = ICartStateProps & ICartDispatchProps;\r\n\r\nfunction Cart(props: ICartProps): JSX.Element {\r\n  function removeFromCart(id: number): void {\r\n    props.removeItemsWithId(id);\r\n  }\r\n\r\n  function updateCartListingQuantity(id: number, quantity: number): void {\r\n    props.alterItemQuantity(id, quantity);\r\n  }\r\n\r\n  function calculateBasketTotal(cartItems: ICartListingState[], listings: IListingState[]): number {\r\n    let total: number = 0;\r\n\r\n    cartItems.forEach(item => {\r\n      const listing: IListingState | undefined = listings.find(l => l.itemId === item.id);\r\n\r\n      if (listing != null) {\r\n        total += listing.price * item.quantity;\r\n      }\r\n    });\r\n\r\n    return total;\r\n  }\r\n\r\n  return (\r\n    <div className=\"card-box\">\r\n      <PageTitle\r\n        title=\"SHOPPING CART\"\r\n      />\r\n      <CartItemsTable\r\n        items={props.items}\r\n        listings={props.listings}\r\n        removeFromCart={removeFromCart}\r\n        updateCartListingQuantity={updateCartListingQuantity}\r\n        readonly={false}\r\n      />\r\n      {\r\n        props.items.length > 0 &&\r\n        <div className=\"row\">\r\n          <div className=\"col-12\">\r\n            <p className=\"text-right\">\r\n              <b>Basket Total:</b> £{calculateBasketTotal(props.items, props.listings).toFixed(2)}\r\n            </p>\r\n            <p className=\"text-right\">\r\n              <Link to=\"/checkout\" className=\"btn btn-info\">Checkout</Link>\r\n            </p>\r\n          </div>\r\n        </div>\r\n      }\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction mapStateToProps(state: IReduxState): ICartStateProps {\r\n  return {\r\n    items: state.cartState.items,\r\n    listings: state.listingsState.listings\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: any): ICartDispatchProps {\r\n  return {\r\n    removeItemsWithId: (id: number) => dispatch(removeItemFromCart(id)),\r\n    alterItemQuantity: (id: number, quantity: number) => dispatch(alterCartQuantity(id, quantity))\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Cart);","import React from \"react\";\r\nimport Listings from \"./Listings/Listings\";\r\nimport Cart from \"./Cart/Cart\";\r\n\r\nfunction Store(): JSX.Element {\r\n  return (\r\n    <div className=\"row\">\r\n      <div className=\"col-lg-7 col-xl-8\">\r\n        <Listings />\r\n      </div>\r\n      <div className=\"col-lg-5 col-xl-4\">\r\n        <Cart />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Store;","import React, { useState } from \"react\";\r\nimport fetchDataUrl from \"../App/common/proxy\";\r\nimport showErrorAlert from \"../App/common/errorMessage\";\r\nimport { IListingState, IAppliedVoucherResponse, ICartListingState } from \"../App/index\";\r\n\r\ninterface IApplyVoucherFormProps {\r\n  itemIdQuantities: ICartListingState[];\r\n  updateAppliedVouchers: (appliedVouchers: IAppliedVoucherResponse[]) => void;\r\n}\r\n\r\nfunction ApplyVoucherForm(props: IApplyVoucherFormProps): JSX.Element {\r\n  const [voucherCodes, setVoucherCodes] = useState<string[]>([]);\r\n  const [voucherInput, setVoucherInput] = useState(\"\");\r\n  const [voucherInputError, setVoucherInputError] = useState(\"\");\r\n\r\n  async function onFormSubmit(e: React.FormEvent): Promise<void> {\r\n    e.preventDefault();\r\n    // validate\r\n    if (voucherInput.length === 0) {\r\n      setVoucherInputError(\"Code must be between 1 and 20 characters\");\r\n      return;\r\n    }\r\n\r\n    if (voucherCodes.indexOf(voucherInput) !== -1) {\r\n      setVoucherInputError(\"A voucher with this code has already been applied\");\r\n      return;\r\n    }\r\n\r\n    const codes: string[] = voucherCodes.slice();\r\n    codes.push(voucherInput);\r\n    applyVouchers(codes);\r\n  }\r\n\r\n  async function applyVouchers(codes: string[]): Promise<void> {\r\n    const url: string = `${fetchDataUrl()}/vouchers/apply`;\r\n\r\n    fetch(url, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      },\r\n      body: JSON.stringify({\r\n        codes,\r\n        itemIdQuantities: props.itemIdQuantities.map(q => {\r\n          return {\r\n            itemId: q.id,\r\n            quantity: q.quantity\r\n          };\r\n        })\r\n      })\r\n    })\r\n    .then(async res => {\r\n      if (res.status === 200) {\r\n        const json: IAppliedVoucherResponse[] = await res.json();\r\n        props.updateAppliedVouchers(json);\r\n        setVoucherCodes(codes);\r\n        setVoucherInput(\"\");\r\n      } else {\r\n        const text: string = await res.text();\r\n        showErrorAlert(\"Failed to apply voucher\", text);\r\n      }\r\n    })\r\n    .catch(err => {\r\n      showErrorAlert(\"Failed to apply voucher\", err);\r\n    });\r\n  }\r\n\r\n  async function clearVouchers(): Promise<void> {\r\n    await applyVouchers([]);\r\n    setVoucherCodes([]);\r\n    setVoucherInputError(\"\");\r\n    props.updateAppliedVouchers([]);\r\n  }\r\n\r\n  return (\r\n    <div className=\"row\">\r\n      <div className=\"col-12\">\r\n        <form role=\"form\" onSubmit={onFormSubmit}>\r\n          <div className=\"form-group\">\r\n            <label>Enter Voucher Code</label>\r\n            <div className=\"input-group\">\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                style={{\r\n                  maxWidth: \"250px\"\r\n                }}\r\n                value={voucherInput}\r\n                onChange={(e) => {\r\n                  setVoucherInput(e.target.value);\r\n                  setVoucherInputError(\"\");\r\n                }}\r\n              />\r\n              <div className=\"input-group-append\">\r\n                <button className=\"btn btn-info\">Submit</button>\r\n              </div>\r\n            </div>\r\n            {\r\n              voucherInputError.length > 0 &&\r\n              <p className=\"text-danger font-13\">{voucherInputError}</p>\r\n            }\r\n          </div>\r\n        </form>\r\n      </div>\r\n      <div className=\"col-12\">\r\n        <button\r\n          className=\"btn\"\r\n          onClick={clearVouchers}\r\n        >Clear Vouchers</button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ApplyVoucherForm;","import React, { useEffect, useState } from \"react\";\r\nimport { ICartListingState, IListingState, IReduxState, IAppliedVoucherResponse, IGiftVoucher } from \"../../App/index\";\r\nimport CartItemsTable from \"../../Components/CartItemsTable\";\r\nimport { connect } from \"react-redux\";\r\nimport ApplyVoucherForm from \"../../Components/ApplyVoucherForm\";\r\nimport getDataUrl from \"../../App/common/proxy\";\r\nimport showErrorAlert from \"../../App/common/errorMessage\";\r\nimport PageTitle from \"../../Layout/PageTitle/PageTitle\";\r\nimport swal from \"sweetalert\";\r\nimport { setCartCookie } from \"../../App/common/cookieManager\";\r\n\r\ninterface ICheckoutStateProps {\r\n  cartItems: ICartListingState[];\r\n}\r\n\r\ntype IProps = ICheckoutStateProps;\r\n\r\nfunction Checkout(props: IProps): JSX.Element {\r\n  const [cartListings, setCartListings] = useState<IListingState[]>([]);\r\n  const [isFetchingCartListings, setIsFetchingCartListings] = useState(false);\r\n  const [appliedVouchers, setAppliedVouchers] = useState<IAppliedVoucherResponse[]>([]);\r\n\r\n  async function fetchItemsByIds(): Promise<void> {\r\n    setIsFetchingCartListings(true);\r\n\r\n    const itemIds: number[] = props.cartItems.map(i => i.id);\r\n    const url: string = `${getDataUrl()}/items/byIds?csvItemIds=${itemIds.join(\",\")}`;\r\n    fetch(url)\r\n      .then(async (res) => {\r\n        const listings: IListingState[] = await res.json();\r\n        setCartListings(listings);\r\n      })\r\n      .catch((err) => {\r\n        showErrorAlert(\"An error occured fetching listings\", err);\r\n      })\r\n      .finally(() => {\r\n        setIsFetchingCartListings(false);\r\n      });\r\n  }\r\n\r\n  useEffect(() => {\r\n    fetchItemsByIds();\r\n  }, [\r\n    props.cartItems\r\n  ]);\r\n\r\n  function calculateBasketTotal(cartItems: ICartListingState[], listings: IListingState[]): number {\r\n    let total: number = 0;\r\n\r\n    cartItems.forEach(item => {\r\n      const listing: IListingState | undefined = listings.find(l => l.itemId === item.id);\r\n\r\n      if (listing != null) {\r\n        total += listing.price * item.quantity;\r\n      }\r\n    });\r\n\r\n    return total;\r\n  }\r\n\r\n  function calculateSubTotal(basketTotal: number, appliedVouchers: IAppliedVoucherResponse[]): number {\r\n    const appliedVoucherDiscountTotal: number = appliedVouchers.reduce((t, n) => t + n.discount, 0);\r\n    return basketTotal - appliedVoucherDiscountTotal;\r\n  }\r\n\r\n  function mapGiftVouchers(cartItems: ICartListingState[], listings: IListingState[]): IGiftVoucher[] {\r\n    const items: IListingState[] = listings.filter(l => l.itemType === \"Voucher\" && cartItems.find(i => i.id === l.itemId) != null);\r\n\r\n    const quantifiedVouchers: IGiftVoucher[] = [];\r\n    for(const _item of items) {\r\n      const item = cartItems.find(i => i.id === _item.itemId);\r\n      if (item == null) {\r\n        continue;\r\n      }\r\n\r\n      for (let i = 0; i < item.quantity; i++) {\r\n        quantifiedVouchers.push({\r\n          value: _item.price,\r\n          code: \"\",\r\n          voucherType: \"Voucher\",\r\n          voucherId: -1\r\n        });\r\n      }\r\n    }\r\n\r\n    return quantifiedVouchers;\r\n  }\r\n\r\n  async function buyItems() {\r\n    const url: string = `${getDataUrl()}/vouchers/gift`;\r\n\r\n    fetch(url, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      },\r\n      body: JSON.stringify({\r\n        giftVouchers: mapGiftVouchers(props.cartItems, cartListings).map((g) => {\r\n          return {\r\n            value: g.value\r\n          };\r\n        })\r\n      })\r\n    })\r\n    .then(async (res) => {\r\n      const text: string = await res.text();\r\n      const price = calculateSubTotal(calculateBasketTotal(props.cartItems, cartListings), appliedVouchers).toFixed(2);\r\n      swal({\r\n        title: `You spent £${price}`,\r\n        icon: \"success\",\r\n        text\r\n      })\r\n      .then(() => {\r\n        setCartCookie([], 7);\r\n        window.location.href = \"/\";\r\n      });\r\n    })\r\n    .catch((err) => {\r\n      showErrorAlert(\"An error occured fetching listings\", err);\r\n    })\r\n    .finally(() => {\r\n      setIsFetchingCartListings(false);\r\n    });\r\n  }\r\n\r\n  return (\r\n    <div className=\"row\">\r\n      <div className=\"col-12\">\r\n        <div className=\"card-box\">\r\n          <PageTitle\r\n            title=\"CHECKOUT\"\r\n          />\r\n          <CartItemsTable\r\n            items={props.cartItems}\r\n            listings={cartListings}\r\n            readonly={true}\r\n            isFetching={isFetchingCartListings}\r\n          />\r\n          {\r\n            !isFetchingCartListings && cartListings.length > 0 &&\r\n            <div className=\"row mt-3\">\r\n              <div className=\"col-6\">\r\n                <ApplyVoucherForm\r\n                  itemIdQuantities={props.cartItems.filter(i =>\r\n                    cartListings.find(item => item.itemId === i.id) != null)}\r\n                  updateAppliedVouchers={setAppliedVouchers}\r\n                />\r\n              </div>\r\n              <div className=\"col-6\">\r\n                <p className=\"text-right\">\r\n                  Basket Total: <b>£{calculateBasketTotal(props.cartItems, cartListings).toFixed(2)}</b>\r\n                </p>\r\n                <div>\r\n                  <table\r\n                    className=\"table table-sm float-right\"\r\n                    style={{\r\n                      maxWidth: \"300px\",\r\n                      margin: \"0px\"\r\n                    }}>\r\n                    <tbody>\r\n                      {\r\n                        appliedVouchers.map((appliedVoucher, i) =>\r\n                          <tr key={i}>\r\n                            <td>{appliedVoucher.description}</td>\r\n                            <td><b>- £{appliedVoucher.discount}</b></td>\r\n                          </tr>\r\n                        )\r\n                      }\r\n                    </tbody>\r\n                  </table>\r\n                  <div className=\"clearfix\"></div>\r\n                </div>\r\n                <hr/>\r\n                <p className=\"text-right\">\r\n                  Invoice Total: <b>£{calculateSubTotal(calculateBasketTotal(props.cartItems, cartListings), appliedVouchers).toFixed(2)}</b>\r\n                </p>\r\n                <button className=\"btn btn-success mt-3 float-right\" onClick={buyItems}>Buy Now</button>\r\n              </div>\r\n            </div>\r\n          }\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction mapStateToProps(state: IReduxState): ICheckoutStateProps {\r\n  return {\r\n    cartItems: state.cartState.items\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(Checkout);","import { createBrowserHistory } from \"history\";\r\n\r\nexport default createBrowserHistory();","import React from \"react\";\r\nimport history from \"../App/history\";\r\n\r\ninterface IItemManagementTableProps {\r\n  items: Array<{\r\n    itemId: number;\r\n    name: string;\r\n    price: number;\r\n  }>;\r\n}\r\n\r\ninterface IItemManagementTableRowProps {\r\n  itemId: number;\r\n  title: string;\r\n  price: number;\r\n}\r\n\r\nfunction ItemManagementTableRow(props: IItemManagementTableRowProps): JSX.Element {\r\n  return (\r\n    <tr onClick={() => history.push(`/item-management/edit/${props.itemId}`)} style={{cursor: \"pointer\"}}>\r\n      <td>{props.itemId}</td>\r\n      <td>{props.title}</td>\r\n      <td>{props.price.toFixed(2)}</td>\r\n    </tr>\r\n  );\r\n}\r\n\r\nfunction ItemManagementTable(props: IItemManagementTableProps): JSX.Element {\r\n  return (\r\n    <div className=\"row\">\r\n      <div className=\"col-12\">\r\n        <div className=\"table-responsive mt-3\">\r\n          <table className=\"table table-hover\">\r\n            <thead>\r\n              <tr>\r\n                <th>Item Id</th>\r\n                <th>Title</th>\r\n                <th>Unit Price (£)</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {\r\n                props.items.map((item, i) =>\r\n                  <ItemManagementTableRow\r\n                    itemId={item.itemId}\r\n                    key={i}\r\n                    price={item.price}\r\n                    title={item.name}\r\n                  />\r\n                )\r\n              }\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ItemManagementTable;","import React, { useState } from \"react\";\r\nimport { render } from \"react-dom\";\r\n\r\ninterface IItemEditFormProps {\r\n  form: {\r\n    title: string;\r\n    unitPrice: number;\r\n    description: string;\r\n    imageUri: string;\r\n    itemId: number;\r\n  };\r\n  formChanged: (title: string, description: string, price: number, imageUri: string) => void;\r\n  readonly?: boolean;\r\n}\r\n\r\ninterface IItemEditFormState {\r\n  form: {\r\n    title: string;\r\n    description: string;\r\n    price: string;\r\n    imageUri: string;\r\n  };\r\n  titleError: string;\r\n  descriptionError: string;\r\n  priceError: string;\r\n  imageError: string;\r\n}\r\n\r\nclass ItemEditForm extends React.PureComponent<IItemEditFormProps, IItemEditFormState> {\r\n  public constructor(props: IItemEditFormProps) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      form: {\r\n        description: props.form.description,\r\n        price: props.form.unitPrice.toString(),\r\n        title: props.form.title,\r\n        imageUri: props.form.imageUri\r\n      },\r\n      descriptionError: \"\",\r\n      priceError: \"\",\r\n      titleError: \"\",\r\n      imageError: \"\"\r\n    };\r\n\r\n    this.setState.bind(this);\r\n  }\r\n\r\n  public componentWillReceiveProps(nextProps: IItemEditFormProps) {\r\n    if (this.props.form.itemId !== nextProps.form.itemId) {\r\n      this.setState({\r\n        form: {\r\n          description: nextProps.form.description,\r\n          imageUri: nextProps.form.imageUri,\r\n          price: nextProps.form.unitPrice.toString(),\r\n          title: nextProps.form.title\r\n        },\r\n        descriptionError: \"\",\r\n        imageError: \"\",\r\n        priceError: \"\",\r\n        titleError: \"\"\r\n      });\r\n    }\r\n  }\r\n\r\n  public validateForm = (): boolean => {\r\n    let isValid: boolean = true;\r\n\r\n    this.setState({\r\n      titleError: \"\",\r\n      priceError: \"\",\r\n      descriptionError: \"\",\r\n      imageError: \"\"\r\n    });\r\n\r\n    // title\r\n    if (this.state.form.title.length === 0 || this.state.form.title.length > 50) {\r\n      this.setState({\r\n        titleError: \"Title must be between 1 and 50 characters\"\r\n      });\r\n      isValid = false;\r\n    }\r\n\r\n    // description\r\n    if (this.state.form.description.length === 0 || this.state.form.description.length > 255) {\r\n      this.setState({\r\n        descriptionError: \"Description must be between 1 and 255 characters\"\r\n      });\r\n      isValid = false;\r\n    }\r\n\r\n    // price\r\n    if (parseFloat(this.state.form.price) < 0) {\r\n      this.setState({\r\n        priceError: \"Price must be 0 or greater\"\r\n      });\r\n      isValid = false;\r\n    }\r\n\r\n    // image\r\n    if (this.state.form.imageUri.length === 0) {\r\n      this.setState({\r\n        imageError: \"You must upload an image\"\r\n      });\r\n      isValid = false;\r\n    }\r\n\r\n    return isValid;\r\n  }\r\n\r\n  public render(): JSX.Element {\r\n    return (\r\n      <form className=\"mt-3\" onBlur={this.updateForm}>\r\n        <div className=\"row\">\r\n          <div className=\"col-md-6\">\r\n            <label>Title *</label>\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              maxLength={50}\r\n              value={this.state.form.title}\r\n              onChange={this.updateTitle}\r\n              readOnly={this.props.readonly}\r\n            />\r\n            {\r\n              this.state.titleError.length > 0 &&\r\n              <p className=\"text-danger font-13 mb-0\">{this.state.titleError}</p>\r\n            }\r\n          </div>\r\n          <div className=\"col-md-6\">\r\n            <label>Unit Price *</label>\r\n            <div className=\"input-group\">\r\n              <div className=\"input-group-prepend\">\r\n                <span className=\"input-group-text\">£</span>\r\n              </div>\r\n              <input\r\n                type=\"number\"\r\n                className=\"form-control\"\r\n                accept=\"\\d*\\.?\\d*\"\r\n                min={0}\r\n                step=\"any\"\r\n                value={this.state.form.price}\r\n                onChange={this.updatePrice}\r\n                onBlur={this.onBlurPrice}\r\n                readOnly={this.props.readonly}\r\n              />\r\n              {\r\n                this.state.priceError.length > 0 &&\r\n                <p className=\"text-danger font-13 mb-0\">{this.state.priceError}</p>\r\n              }\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"row mt-3\">\r\n          <div className=\"col-12\">\r\n            <label>Image</label>\r\n            <br/>\r\n            {\r\n              !this.props.readonly &&\r\n              <>\r\n                {\r\n                  this.state.form.imageUri.length > 0 &&\r\n                  <>\r\n                    <button\r\n                      className=\"btn btn-default\"\r\n                      onClick={this.clearImage}\r\n                    >Clear Image</button>\r\n                    <br/>\r\n                  </>\r\n                }\r\n                {\r\n                  this.state.form.imageUri.length === 0 &&\r\n                  <>\r\n                    <input\r\n                      type=\"file\"\r\n                      className=\"form-control\"\r\n                      multiple={false}\r\n                      accept=\"image/png,image/jpeg,image/jpg\"\r\n                      onChange={this.updateImage}\r\n                      readOnly={this.props.readonly}\r\n                    />\r\n                  </>\r\n                }\r\n              </>\r\n            }\r\n            <img\r\n              src={this.state.form.imageUri}\r\n              style={{\r\n                maxWidth: \"100%\",\r\n                maxHeight: \"200px\"\r\n              }}\r\n              className=\"mt-3\"\r\n            />\r\n            {\r\n              this.state.imageError.length > 0 &&\r\n              <p className=\"text-danger font-13 mb-0\">{this.state.imageError}</p>\r\n            }\r\n          </div>\r\n          <div className=\"col-12 mt-3\">\r\n            <label>Description *</label>\r\n            <textarea\r\n              className=\"form-control\"\r\n              rows={5}\r\n              style={{minHeight: \"100px\"}}\r\n              value={this.state.form.description}\r\n              onChange={this.updateDescription}\r\n              readOnly={this.props.readonly}\r\n            />\r\n            {\r\n              this.state.descriptionError.length > 0 &&\r\n              <p className=\"text-danger font-13 mb-0\">{this.state.descriptionError}</p>\r\n            }\r\n          </div>\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n\r\n  private clearImage = (e: any): void => {\r\n    e.preventDefault();\r\n    this.setState({...this.state, form: {...this.state.form, imageUri: \"\"}, imageError: \"\"});\r\n  }\r\n\r\n  private updateImage = (e: React.ChangeEvent<HTMLInputElement>): void => {\r\n    const file: File | undefined = e.target.files ? e.target.files[0] : undefined;\r\n\r\n    if (file == null || (!file.name.includes(\".jpg\") && !file.name.includes(\".png\") && !file.name.includes(\".jpeg\"))) {\r\n      this.setState(\r\n        {...this.state, form: {...this.state.form, imageUri: \"\"}, imageError: \"Unsupported media type. Allowed types or .jpg and .png\"}\r\n      );\r\n      e.target.value = \"\";\r\n    } else {\r\n      var reader: FileReader = new FileReader();\r\n      reader.readAsDataURL(file);\r\n\r\n      reader.onload = (): void => {\r\n        const result: string = reader.result as string;\r\n        this.setState({...this.state, form: {...this.state.form, imageUri: result}, imageError: \"\"});\r\n        this.props.formChanged(this.props.form.title, this.props.form.description, this.props.form.unitPrice, result);\r\n      };\r\n\r\n      reader.onerror = (): void => {\r\n        this.setState({...this.state, imageError: \"Unsupported media. Try a jpg or png file\"});\r\n      };\r\n    }\r\n  }\r\n\r\n  private updateForm = (): void => {\r\n    this.props.formChanged(this.state.form.title, this.state.form.description, parseFloat(this.state.form.price), this.state.form.imageUri);\r\n  }\r\n\r\n  private onBlurPrice = (e: React.FocusEvent<HTMLInputElement>): void => {\r\n    const price: string = (e.target.validity.valid && e.target.value.length > 0 ? parseFloat(e.target.value) : 0).toFixed(2);\r\n\r\n    this.setState({...this.state, form: {...this.state.form, price}, priceError: \"\"});\r\n  }\r\n\r\n  private updatePrice = (e: React.ChangeEvent<HTMLInputElement>): void => {\r\n    this.setState({...this.state, form: {...this.state.form, price: e.target.value}, priceError: \"\"});\r\n  }\r\n\r\n  private updateTitle = (e: React.ChangeEvent<HTMLInputElement>): void => {\r\n    this.setState({...this.state, form: {...this.state.form, title: e.target.value}, titleError: \"\"});\r\n  }\r\n\r\n  private updateDescription = (e: React.ChangeEvent<HTMLTextAreaElement>): void => {\r\n    this.setState({...this.state, form: {...this.state.form, description: e.target.value}, descriptionError: \"\"});\r\n  }\r\n}\r\n\r\nexport default ItemEditForm;","import React, { useEffect, useState } from \"react\";\r\nimport PageTitle from \"../../../Layout/PageTitle/PageTitle\";\r\nimport ItemEditForm from \"../../../Components/ItemEditForm\";\r\nimport { IReduxState } from \"../../../App/index\";\r\nimport { updateNewItemFormState } from \"./redux/newItemAction\";\r\nimport { connect } from \"react-redux\";\r\nimport swal from \"sweetalert\";\r\nimport showErrorAlert from \"../../../App/common/errorMessage\";\r\nimport history from \"../../../App/history\";\r\nimport getDataUrl from \"../../../App/common/proxy\";\r\nimport { fetchAllListings } from \"../../Store/Listings/redux/listingsActions\";\r\n\r\ninterface INewItemDispatchProps {\r\n  updateNewItemForm: (title: string, price: number, description: string, imageUri: string) => void;\r\n  fetchAllItems: () => void;\r\n}\r\n\r\ninterface INewItemStateProps {\r\n  title: string;\r\n  description: string;\r\n  price?: number;\r\n  imageUri: string;\r\n}\r\n\r\ntype INewItemProps = INewItemDispatchProps & INewItemStateProps;\r\n\r\nfunction NewItem(props: INewItemProps): JSX.Element {\r\n  const formRef: React.RefObject<ItemEditForm> = React.createRef();\r\n  const [isSaving, setIsSaving] = useState(false);\r\n\r\n  function handleFormChange(title: string, description: string, price: number, imageUri: string): void {\r\n    props.updateNewItemForm(title, price, description, imageUri);\r\n  }\r\n\r\n  async function onSave(): Promise<void> {\r\n    if (formRef.current) {\r\n      if (!formRef.current.validateForm()) {\r\n        return;\r\n      }\r\n    }\r\n\r\n    const swalResponse: any = await swal({\r\n      icon: \"warning\",\r\n      title: \"Are you sure?\",\r\n      text: \"This will list a new item in the store.\",\r\n      dangerMode: true,\r\n      buttons: [\"Cancel\", \"Create\"]\r\n    });\r\n\r\n    if (swalResponse === true) {\r\n      setIsSaving(true);\r\n\r\n      const url: string = `${getDataUrl()}/items`;\r\n      await fetch(url, {\r\n        method: \"POST\",\r\n        body: JSON.stringify({\r\n          name: props.title,\r\n          description: props.description,\r\n          price: props.price || 0,\r\n          imageUri: props.imageUri\r\n        }),\r\n        headers: {\r\n          \"Content-Type\": \"application/json\"\r\n        }\r\n      })\r\n      .then(async (res) => {\r\n        if (res.status === 201) {\r\n          props.updateNewItemForm(\"\", 0, \"\", \"\");\r\n          props.fetchAllItems();\r\n          history.push(\"/item-management\");\r\n        } else {\r\n          const text: string = await res.text();\r\n          showErrorAlert(\"Couldn't save item\", text);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        showErrorAlert(\"Couldn't save item\", err);\r\n      })\r\n      .finally(() => {\r\n        setIsSaving(false);\r\n      });\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"card-box\">\r\n      <PageTitle\r\n        title=\"NEW ITEM\"\r\n      />\r\n      <ItemEditForm\r\n        ref={formRef}\r\n        form={{\r\n          imageUri: props.imageUri,\r\n          description: props.description,\r\n          title: props.title,\r\n          unitPrice: props.price || 0,\r\n          itemId: -1\r\n        }}\r\n        formChanged={handleFormChange}\r\n        readonly={isSaving}\r\n      />\r\n      <button\r\n        className=\"btn btn-info mt-3\"\r\n        onClick={onSave}\r\n        disabled={isSaving}\r\n      >{isSaving ? \"Saving...\" : \"Save Item\"}</button>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction mapStateToProps(state: IReduxState): INewItemStateProps {\r\n  return {\r\n    title: state.newItemState.title,\r\n    description: state.newItemState.description,\r\n    price: state.newItemState.unitPrice,\r\n    imageUri: state.newItemState.imageUri\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: any): INewItemDispatchProps {\r\n  return {\r\n    updateNewItemForm: (title: string, price: number, description: string, imageUri: string) =>\r\n      dispatch(updateNewItemFormState(title, price, description, imageUri)),\r\n      fetchAllItems: () => dispatch(fetchAllListings())\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(NewItem);","import React, { useState, useEffect } from \"react\";\r\nimport PageTitle from \"../../../Layout/PageTitle/PageTitle\";\r\nimport { IListingState, IReduxState } from \"../../../App/index\";\r\nimport { RouteComponentProps } from \"react-router\";\r\nimport ItemEditForm from \"../../../Components/ItemEditForm\";\r\nimport history from \"../../../App/history\";\r\nimport { connect } from \"react-redux\";\r\nimport swal from \"sweetalert\";\r\nimport getDataUrl from \"../../../App/common/proxy\";\r\nimport showErrorAlert from \"../../../App/common/errorMessage\";\r\nimport { fetchAllListings } from \"../../Store/Listings/redux/listingsActions\";\r\n\r\ninterface IEditItemDispatchProps {\r\n  fetchAllListings: () => void;\r\n}\r\n\r\ninterface IEditItemUrlProps {\r\n  itemId: string;\r\n}\r\n\r\ninterface IEditItemStateProps {\r\n  items: IListingState[];\r\n}\r\n\r\ntype IEditItemProps = IEditItemStateProps & RouteComponentProps<IEditItemUrlProps> & IEditItemDispatchProps;\r\n\r\ninterface IEditItemState {\r\n  form: {\r\n    description: string;\r\n    title: string;\r\n    unitPrice: string;\r\n    imageUri: string;\r\n  };\r\n  isEditing: boolean;\r\n  isSaving: boolean;\r\n  isDeleting: boolean;\r\n}\r\n\r\nclass EditItem extends React.PureComponent<IEditItemProps, IEditItemState> {\r\n  private formRef: React.RefObject<ItemEditForm> = React.createRef();\r\n  public constructor(props: IEditItemProps) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      form: {\r\n        description: \"\",\r\n        imageUri: \"\",\r\n        title: \"\",\r\n        unitPrice: \"\"\r\n      },\r\n      isEditing: false,\r\n      isSaving: false,\r\n      isDeleting: false\r\n    };\r\n  }\r\n\r\n  public componentWillReceiveProps(nextProps: IEditItemProps) {\r\n    if (this.props.match.params.itemId !== nextProps.match.params.itemId) {\r\n      this.setState({\r\n        isEditing: false,\r\n        isSaving: false,\r\n        isDeleting: false\r\n      });\r\n    }\r\n  }\r\n\r\n  public render(): JSX.Element {\r\n    const item: IListingState | undefined = this.props.items.find(i => i.itemId.toString() === this.props.match.params.itemId);\r\n\r\n    if (item == null) {\r\n      history.push(\"/item-management\");\r\n      return <></>;\r\n    }\r\n\r\n    return (\r\n      <div className=\"card-box\">\r\n        <PageTitle\r\n          title={\"EDIT ITEM (ITEM ID: \" + this.props.match.params.itemId + \")\"}\r\n        />\r\n        <ItemEditForm\r\n          ref={this.formRef}\r\n          form={{\r\n            itemId: item.itemId,\r\n            description: item.description,\r\n            title: item.name,\r\n            unitPrice: item.price,\r\n            imageUri: item.imageUri\r\n          }}\r\n          formChanged={this.handleFormChange}\r\n          readonly={!this.state.isEditing || this.state.isSaving}\r\n        />\r\n        {\r\n          this.state.isEditing &&\r\n          (\r\n            <>\r\n              <button\r\n                className=\"btn btn-info mt-3\"\r\n                onClick={this.updateItem}\r\n                disabled={this.state.isSaving}\r\n              >{this.state.isSaving ? \"Saving...\" : \"Update Item\"}</button>\r\n            </>\r\n          )\r\n        }\r\n        {\r\n          !this.state.isEditing &&\r\n          <>\r\n            <button\r\n              className=\"btn btn-primary mt-3\"\r\n              onClick={() => this.setState({isEditing: true})}\r\n            >Edit Item</button>\r\n            <button \r\n              className=\"btn btn-danger mt-3 ml-3\"\r\n              onClick={this.deleteItem}\r\n            >\r\n              Delete Item\r\n            </button>\r\n          </>\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private deleteItem = async(): Promise<void> => {\r\n    const swalResponse: any = await swal({\r\n      icon: \"warning\",\r\n      title: \"Are you sure?\",\r\n      text: \"This will permanently delete this item\",\r\n      dangerMode: true,\r\n      buttons: [\"Cancel\", \"Delete\"]\r\n    });\r\n\r\n    if (swalResponse === true) {\r\n      this.setState({\r\n        isDeleting: true\r\n      });\r\n\r\n      const url: string = `${getDataUrl()}/items/${this.props.match.params.itemId}`;\r\n      await fetch(url, {\r\n        method: \"DELETE\"\r\n      })\r\n      .then(async (res) => {\r\n        if (res.status === 200) {\r\n          this.props.fetchAllListings();\r\n          history.push(\"/item-management\");\r\n        } else {\r\n          const text: string = await res.text();\r\n          showErrorAlert(\"Couldn't save item\", text);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        showErrorAlert(\"Couldn't save item\", err);\r\n      })\r\n      .finally(() => {\r\n        this.setState({\r\n          isDeleting: false\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  private updateItem = async(): Promise<void> => {\r\n    if (this.formRef.current && this.formRef.current.validateForm()) {\r\n      const swalResponse: any = await swal({\r\n        icon: \"warning\",\r\n        title: \"Are you sure?\",\r\n        text: \"This will update the selected item\",\r\n        dangerMode: true,\r\n        buttons: [\"Cancel\", \"Update\"]\r\n      });\r\n\r\n      if (swalResponse === true) {\r\n        this.setState({\r\n          isSaving: true\r\n        });\r\n\r\n        const url: string = `${getDataUrl()}/items/${this.props.match.params.itemId}`;\r\n        await fetch(url, {\r\n          method: \"PUT\",\r\n          body: JSON.stringify({\r\n            name: this.state.form.title,\r\n            description: this.state.form.description,\r\n            price: this.state.form.unitPrice || 0,\r\n            imageUri: this.state.form.imageUri\r\n          }),\r\n          headers: {\r\n            \"Content-Type\": \"application/json\"\r\n          }\r\n        })\r\n        .then(async (res) => {\r\n          if (res.status === 200) {\r\n            this.props.fetchAllListings();\r\n            history.push(\"/item-management\");\r\n          } else {\r\n            const text: string = await res.text();\r\n            showErrorAlert(\"Couldn't save item\", text);\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          showErrorAlert(\"Couldn't save item\", err);\r\n        })\r\n        .finally(() => {\r\n          this.setState({\r\n            isSaving: false\r\n          });\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  private handleFormChange = (title: string, description: string, price: number, imageUri: string): void => {\r\n    this.setState({\r\n      ...this.state,\r\n      form: {...this.state.form, title, description, imageUri, unitPrice: price.toString()}\r\n    });\r\n  }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: any): IEditItemDispatchProps {\r\n  return {\r\n    fetchAllListings: () => dispatch(fetchAllListings())\r\n  };\r\n}\r\n\r\nfunction mapStateToProps(state: IReduxState): IEditItemStateProps {\r\n  return {\r\n    items: state.listingsState.listings\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(EditItem);","import React, { useState, useEffect } from \"react\";\r\nimport PageTitle from \"../../Layout/PageTitle/PageTitle\";\r\nimport { IListingState, IReduxState } from \"../../App/index\";\r\nimport { fetchAllListings } from \"../Store/Listings/redux/listingsActions\";\r\nimport { connect } from \"react-redux\";\r\nimport ItemManagementTable from \"../../Components/ItemManagementTable\";\r\nimport { Link, Switch, Route } from \"react-router-dom\";\r\nimport NewItem from \"./New/New\";\r\nimport EditItem from \"./Edit/EditItem\";\r\n\r\ninterface IItemManagementDispatchProps {\r\n  fetchAllListings: () => void;\r\n}\r\n\r\ninterface IItemManagementStateProps {\r\n  listings: IListingState[];\r\n  isFetchingListings: boolean;\r\n}\r\n\r\ntype IItemManagementProps = IItemManagementDispatchProps & IItemManagementStateProps;\r\n\r\nfunction ItemManagement(props: IItemManagementProps): JSX.Element {\r\n  useEffect(() => {\r\n    props.fetchAllListings();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"row\">\r\n      <div className=\"col-lg-6 col-xl-8\">\r\n        <div className=\"card-box\">\r\n          <PageTitle\r\n            title=\"ITEM MANAGEMENT\"\r\n          />\r\n          <div className=\"row\">\r\n            <div className=\"col-12\">\r\n              <Link to=\"/item-management/new\" className=\"btn btn-info mt-3\">New Item</Link>\r\n              <button className=\"btn btn-secondary mt-3 float-right\" onClick={props.fetchAllListings}>Refresh</button>\r\n            </div>\r\n          </div>\r\n          <ItemManagementTable\r\n            items={props.listings.filter(i => i.itemType !== \"Voucher\").map((l): {\r\n              itemId: number;\r\n              name: string;\r\n              price: number;\r\n            } => {\r\n              return {\r\n                itemId: l.itemId,\r\n                name: l.name,\r\n                price: l.price\r\n              };\r\n            })}\r\n          />\r\n        </div>\r\n      </div>\r\n      <div className=\"col-lg-6 col-xl-4\">\r\n        <Switch>\r\n          <Route exact={true} path=\"/item-management/new\" component={NewItem} />\r\n          <Route path=\"/item-management/edit/:itemId\" component={EditItem} />\r\n        </Switch>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction mapStateToProps(state: IReduxState): IItemManagementStateProps {\r\n  return {\r\n    listings: state.listingsState.listings,\r\n    isFetchingListings: state.listingsState.isFetchingListings\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: any): IItemManagementDispatchProps {\r\n  return {\r\n    fetchAllListings: () => dispatch(fetchAllListings())\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ItemManagement);","import React from \"react\";\r\nimport { IOfferVoucher, ISubsetGroup } from \"../App/index\";\r\nimport getDataUrl from \"../App/common/proxy\";\r\nimport showErrorAlert from \"../App/common/errorMessage\";\r\nimport swal from \"sweetalert\";\r\nimport LoadingWheel from \"./LoadingWheel\";\r\n\r\ninterface IOfferVoucherManagementTableProps {\r\n  offerVouchers: IOfferVoucher[];\r\n  fetchVouchers: () => void;\r\n  subsets: ISubsetGroup[];\r\n  isLoadingVouchers: boolean;\r\n}\r\n\r\ninterface IOfferVoucherManagementTableRowProps {\r\n  voucherId: number;\r\n  code: string;\r\n  minBasketPrice: number;\r\n  value: number;\r\n  itemSubset: string;\r\n  deleteVoucher: (id: number) => void;\r\n}\r\n\r\ninterface IOfferVoucherManagementTableRowState {\r\n  code: string;\r\n  value: string;\r\n  minBasketPrice: string;\r\n  itemSubset: string;\r\n  codeError: string;\r\n  valueError: string;\r\n  minBasketPriceError: string;\r\n  isSaving: boolean;\r\n  subsetError: string;\r\n}\r\n\r\nfunction OfferVoucherManagementTableRow(props: IOfferVoucherManagementTableRowProps): JSX.Element {\r\n  return (\r\n    <tr>\r\n      <td>{props.voucherId}</td>\r\n      <td>{props.code}</td>\r\n      <td>{props.value.toFixed(2)}</td>\r\n      <td>{props.minBasketPrice.toFixed(2)}</td>\r\n      <td>{props.itemSubset}</td>\r\n      <td>\r\n        <button\r\n          className=\"btn btn-danger\"\r\n          onClick={() => props.deleteVoucher(props.voucherId)}\r\n        >Delete</button>\r\n      </td>\r\n    </tr>\r\n  );\r\n}\r\n\r\nclass OfferVoucherManagementTable extends React.PureComponent<IOfferVoucherManagementTableProps, IOfferVoucherManagementTableRowState> {\r\n  public constructor(props: IOfferVoucherManagementTableProps) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      code: \"\",\r\n      value: \"0\",\r\n      minBasketPrice: \"0\",\r\n      itemSubset: \"\",\r\n      codeError: \"\",\r\n      minBasketPriceError: \"\",\r\n      valueError: \"\",\r\n      subsetError: \"\",\r\n      isSaving: false\r\n    };\r\n  }\r\n\r\n  public render() {\r\n    return (\r\n      <tbody>\r\n        <tr>\r\n          <td>-</td>\r\n          <td>\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              style={{\r\n                maxWidth: \"250px\"\r\n              }}\r\n              value={this.state.code}\r\n              onChange={this.updateCode}\r\n            />\r\n            {\r\n              this.state.codeError.length > 0 &&\r\n              <p className=\"text-danger font-13 mb-0\">{this.state.codeError}</p>\r\n            }\r\n          </td>\r\n          <td>\r\n            <input\r\n              type=\"number\"\r\n              className=\"form-control\"\r\n              style={{\r\n                maxWidth: \"250px\"\r\n              }}\r\n              value={this.state.value}\r\n              onChange={this.updateValue}\r\n              onBlur={this.onBlurValue}\r\n            />\r\n            {\r\n              this.state.valueError.length > 0 &&\r\n              <p className=\"text-danger font-13 mb-0\">{this.state.valueError}</p>\r\n            }\r\n          </td>\r\n          <td>\r\n            <input\r\n              type=\"number\"\r\n              className=\"form-control\"\r\n              style={{\r\n                maxWidth: \"250px\"\r\n              }}\r\n              value={this.state.minBasketPrice}\r\n              onChange={this.updateMinBasketPrice}\r\n              onBlur={this.onBlurMinBasketPrice}\r\n            />\r\n            {\r\n              this.state.minBasketPriceError.length > 0 &&\r\n              <p className=\"text-danger font-13 mb-0\">{this.state.minBasketPriceError}</p>\r\n            }\r\n          </td>\r\n          <td>\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              style={{\r\n                maxWidth: \"250px\"\r\n              }}\r\n              list=\"offerVoucherManagementTableList\"\r\n              onChange={this.onSubsetChange}\r\n              value={this.state.itemSubset}\r\n            />\r\n            {\r\n              this.state.subsetError.length > 0 &&\r\n              <p className=\"text-danger font-13 mb-0\">{this.state.subsetError}</p>\r\n            }\r\n            <datalist id=\"offerVoucherManagementTableList\">\r\n              {\r\n                this.props.subsets.map((s, i) =>\r\n                  <option key={i} value={s.name}>{s.subsetId}</option>\r\n                )\r\n              }\r\n            </datalist>\r\n          </td>\r\n          <td>\r\n            <button className=\"btn btn-info\" onClick={this.saveOfferVoucher}>\r\n            {this.state.isSaving ? \"Saving...\" : \"Save Voucher\"}</button>\r\n          </td>\r\n        </tr>\r\n        {\r\n          this.props.isLoadingVouchers &&\r\n          <tr>\r\n            <td colSpan={6}>\r\n              <LoadingWheel />\r\n            </td>\r\n          </tr>\r\n        }\r\n        {\r\n          this.props.offerVouchers.map((v, i) =>\r\n            <OfferVoucherManagementTableRow\r\n              code={v.code}\r\n              key={i}\r\n              minBasketPrice={v.minPriceToApply}\r\n              voucherId={v.voucherId}\r\n              deleteVoucher={this.deleteVoucher}\r\n              value={v.value}\r\n              itemSubset={v.subsetGroup ? v.subsetGroup.name : \"-\"}\r\n            />\r\n          )\r\n        }\r\n      </tbody>\r\n    );\r\n  }\r\n\r\n  private saveOfferVoucher = async () => {\r\n    let isValid: boolean = true;\r\n\r\n    // code\r\n    if (this.state.code.length === 0 || this.state.code.length > 20) {\r\n      this.setState({\r\n        codeError: \"Code must be between 1 and 20 characters\"\r\n      });\r\n      isValid = false;\r\n    }\r\n\r\n    // item subset\r\n    const subset: ISubsetGroup | undefined = this.props.subsets.find(s => s.name === this.state.itemSubset);\r\n    if (subset == null && this.state.itemSubset.length > 0) {\r\n      this.setState({\r\n        subsetError: \"Not a valid subset\"\r\n      });\r\n      isValid = false;\r\n    }\r\n\r\n    // value\r\n    if (parseFloat(this.state.value) <= 0) {\r\n      this.setState({\r\n        valueError: \"Value must be greater than 0\"\r\n      });\r\n      isValid = false;\r\n    }\r\n\r\n    if (isValid) {\r\n      const swalResponse: any = await swal({\r\n        icon: \"warning\",\r\n        title: \"Are you sure?\",\r\n        text: \"This will create a new voucher\",\r\n        dangerMode: true,\r\n        buttons: [\"Cancel\", \"Create\"]\r\n      });\r\n\r\n      if (!swalResponse) {\r\n        return;\r\n      }\r\n\r\n      this.setState({\r\n        isSaving: true\r\n      });\r\n      const url: string = `${getDataUrl()}/vouchers/offer`;\r\n\r\n      fetch(url, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify({\r\n          minPriceToApply: this.state.minBasketPrice,\r\n          value: this.state.value,\r\n          code: this.state.code,\r\n          voucherType: \"Offer\",\r\n          subsetGroup: {\r\n            name: this.state.itemSubset\r\n          }\r\n        })\r\n      })\r\n      .then(async (res) => {\r\n        if (res.status === 201) {\r\n          this.props.fetchVouchers();\r\n          this.setState({\r\n            code: \"\",\r\n            itemSubset: \"\",\r\n            minBasketPrice: \"\",\r\n            value: \"\"\r\n          });\r\n        } else {\r\n          const text: string = await res.text();\r\n          showErrorAlert(\"Failed to save voucher\", text);\r\n        }\r\n      })\r\n      .catch(err => {\r\n        showErrorAlert(\"Failed to save voucher\", err);\r\n      })\r\n      .finally(() => {\r\n        this.setState({\r\n          isSaving: false\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  private onSubsetChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    this.setState({\r\n      itemSubset: e.target.value,\r\n      subsetError: \"\"\r\n    });\r\n  }\r\n\r\n  private updateCode = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    this.setState({\r\n      code: e.target.value,\r\n      codeError: \"\"\r\n    });\r\n  }\r\n\r\n  private updateValue = (e: React.ChangeEvent<HTMLInputElement>): void => {\r\n    this.setState({\r\n      value: e.target.value,\r\n      valueError: \"\"\r\n    });\r\n  }\r\n\r\n  private onBlurValue = (e: React.FocusEvent<HTMLInputElement>): void => {\r\n    const value: string = (e.target.validity.valid && e.target.value.length > 0 ? parseFloat(e.target.value) : 0).toFixed(2);\r\n\r\n    this.setState({...this.state, value, valueError: \"\"});\r\n  }\r\n\r\n  private updateMinBasketPrice = (e: React.ChangeEvent<HTMLInputElement>): void => {\r\n    this.setState({\r\n      minBasketPrice: e.target.value,\r\n      minBasketPriceError: \"\"\r\n    });\r\n  }\r\n\r\n  private onBlurMinBasketPrice = (e: React.FocusEvent<HTMLInputElement>): void => {\r\n    const minBasketPrice: string = (e.target.validity.valid && e.target.value.length > 0 ? parseFloat(e.target.value) : 0).toFixed(2);\r\n\r\n    this.setState({...this.state, minBasketPrice, minBasketPriceError: \"\"});\r\n  }\r\n\r\n  private deleteVoucher = async (id: number): Promise<void> => {\r\n    const swalResponse: any = await swal({\r\n      icon: \"warning\",\r\n      title: \"Are you sure?\",\r\n      text: \"This will permanently delete this voucher\",\r\n      dangerMode: true,\r\n      buttons: [\"Cancel\", \"Delete\"]\r\n    });\r\n\r\n    if (!swalResponse) {\r\n      return;\r\n    }\r\n\r\n    const url = `${getDataUrl()}/vouchers/${id}`;\r\n\r\n    fetch(url, {\r\n      method: \"DELETE\"\r\n    })\r\n    .then(async (res) => {\r\n      if (res.status === 200) {\r\n        this.props.fetchVouchers();\r\n      } else {\r\n        const text: string = await res.text();\r\n        showErrorAlert(\"Failed to delete voucher\", text);\r\n      }\r\n    })\r\n    .catch((err) => {\r\n      showErrorAlert(\"Failed to delete voucher\", err);\r\n    });\r\n  }\r\n}\r\n\r\nexport default OfferVoucherManagementTable;","import React, { useEffect } from \"react\";\r\nimport { IOfferVoucher, IReduxState, ISubsetGroup } from \"../../../App/index\";\r\nimport { fetchAllVouchers } from \"../redux/voucherActions\";\r\nimport { connect } from \"react-redux\";\r\nimport OfferVoucherManagementTable from \"../../../Components/OfferVoucherManagementTable\";\r\nimport { fetchAllSubsets } from \"../../SubsetsManagement/redux/subsetActions\";\r\n\r\ninterface IOfferVoucherManagementDispatchProps {\r\n  fetchVouchers: () => void;\r\n  fetchSubsets: () => void;\r\n}\r\n\r\ninterface IOfferVoucherManagementPropsStateProps {\r\n  offerVouchers: IOfferVoucher[];\r\n  subsets: ISubsetGroup[];\r\n  isFetchingVouchers: boolean;\r\n}\r\n\r\ntype IOfferVoucherManagementProps = IOfferVoucherManagementDispatchProps & IOfferVoucherManagementPropsStateProps;\r\n\r\nfunction OfferVoucherManagement(props: IOfferVoucherManagementProps): JSX.Element {\r\n  useEffect(() => {\r\n    props.fetchSubsets();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"row mt-3\">\r\n      <div className=\"col-12\">\r\n        <div className=\"table-responsive\">\r\n          <table className=\"table table-hover\">\r\n            <thead>\r\n              <tr>\r\n                <th>Voucher Id</th>\r\n                <th>Code</th>\r\n                <th>Value (£)</th>\r\n                <th>Min. Basket Price (£)</th>\r\n                <th>Item Subset</th>\r\n                <th></th>\r\n              </tr>\r\n            </thead>\r\n            <OfferVoucherManagementTable\r\n              subsets={props.subsets}\r\n              offerVouchers={props.offerVouchers}\r\n              fetchVouchers={props.fetchVouchers}\r\n              isLoadingVouchers={props.isFetchingVouchers}\r\n            />\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction mapStateToProps(state: IReduxState): IOfferVoucherManagementPropsStateProps {\r\n  return {\r\n    offerVouchers: state.voucherState.vouchers.offerVouchers,\r\n    subsets: state.subsetState.subsets,\r\n    isFetchingVouchers: state.voucherState.isFetchingVouchers\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: any): IOfferVoucherManagementDispatchProps {\r\n  return {\r\n    fetchVouchers: () => dispatch(fetchAllVouchers()),\r\n    fetchSubsets: () => dispatch(fetchAllSubsets())\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(OfferVoucherManagement);","import { IGiftVoucher, IReduxState } from \"../App/index\";\r\nimport React from \"react\";\r\nimport { async } from \"q\";\r\nimport swal from \"sweetalert\";\r\nimport getDataUrl from \"../App/common/proxy\";\r\nimport showErrorAlert from \"../App/common/errorMessage\";\r\nimport LoadingWheel from \"./LoadingWheel\";\r\n\r\ninterface IGiftVoucherManagementTableProps {\r\n    giftVouchers: IGiftVoucher[];\r\n    fetchVouchers: () => void;\r\n    isFetchingVouchers: boolean;\r\n}\r\n\r\ninterface IGiftVoucherManagementTableRowProps {\r\n    voucherId: number;\r\n    code: string;\r\n    value: number;\r\n    deleteVoucher: (id: number) => void;\r\n}\r\n\r\ninterface IGiftVoucherManagementTableRowState {\r\n    code: string;\r\n    value: string;\r\n    codeError: string;\r\n    valueError: string;\r\n    isSaving: boolean;\r\n}\r\n\r\nfunction GiftVoucherManagementTableRow(props: IGiftVoucherManagementTableRowProps): JSX.Element {\r\n    return (\r\n        <tr>\r\n            <td>{props.voucherId}</td>\r\n            <td>{props.code}</td>\r\n            <td>{props.value}</td>\r\n            <td>\r\n                <button\r\n                    className=\"btn btn-danger\"\r\n                    onClick={() => props.deleteVoucher(props.voucherId)}\r\n                >Delete</button>\r\n            </td>\r\n        </tr>\r\n    );\r\n}\r\n\r\nclass GiftVoucherManagementTable extends React.PureComponent<IGiftVoucherManagementTableProps, IGiftVoucherManagementTableRowState> {\r\n    public constructor(props: IGiftVoucherManagementTableProps) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            code: \"\",\r\n            codeError: \"\",\r\n            isSaving: false,\r\n            value: \"0\",\r\n            valueError: \"\"\r\n        };\r\n    }\r\n\r\n    public render() {\r\n        return (\r\n            <tbody>\r\n                {/* <tr>\r\n                    <td>-</td>\r\n                    <td>\r\n                        <input\r\n                            type=\"text\"\r\n                            className=\"form-control\"\r\n                            style={{\r\n                                maxWidth: \"250px\"\r\n                            }}\r\n                            value={this.state.code}\r\n                            onChange={this.updateCode}\r\n                        />\r\n                        {\r\n                            this.state.codeError.length > 0 &&\r\n                            <p className=\"text-danger font-13 mb-0\">{this.state.codeError}</p>\r\n                        }\r\n                    </td>\r\n                    <td>\r\n                        <input\r\n                            type=\"number\"\r\n                            className=\"form-control\"\r\n                            style={{\r\n                                maxWidth: \"250px\"\r\n                            }}\r\n                            value={this.state.value}\r\n                            onChange={this.updateValue}\r\n                            onBlur={this.onBlurValue}\r\n                        />\r\n                        {\r\n                            this.state.valueError.length > 0 &&\r\n                            <p className=\"test-danger font-13 mb-0\">{this.state.valueError}</p>\r\n                        }\r\n                    </td>\r\n                    <td>\r\n                        <button\r\n                            className=\"btn btn-info\"\r\n                            onClick={this.saveGiftVoucher}\r\n                        >\r\n                            {this.state.isSaving ? \"Saving...\" : \"Save Voucher\"}\r\n                        </button>\r\n                    </td>\r\n                </tr> */}\r\n                {\r\n                    this.props.isFetchingVouchers &&\r\n                    <tr>\r\n                        <td colSpan={4}>\r\n                        <LoadingWheel />\r\n                        </td>\r\n                    </tr>\r\n                }\r\n                {\r\n                    this.props.giftVouchers.map((v, i) => \r\n                        <GiftVoucherManagementTableRow\r\n                            code={v.code}\r\n                            deleteVoucher={this.deleteVoucher}\r\n                            key={i}\r\n                            value={v.value}\r\n                            voucherId={v.voucherId}\r\n                        />\r\n                    )\r\n                }\r\n            </tbody>\r\n        );\r\n    }\r\n\r\n    private deleteVoucher = async (id: number): Promise<void> => {\r\n        const swalResponse: any = await swal({\r\n          icon: \"warning\",\r\n          title: \"Are you sure?\",\r\n          text: \"This will permanently delete this voucher\",\r\n          dangerMode: true,\r\n          buttons: [\"Cancel\", \"Delete\"]\r\n        });\r\n    \r\n        if (!swalResponse) {\r\n          return;\r\n        }\r\n    \r\n        const url = `${getDataUrl()}/vouchers/${id}`;\r\n    \r\n        fetch(url, {\r\n          method: \"DELETE\"\r\n        })\r\n        .then(async (res) => {\r\n          if (res.status === 200) {\r\n            this.props.fetchVouchers();\r\n          } else {\r\n            const text: string = await res.text();\r\n            showErrorAlert(\"Failed to delete voucher\", text);\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          showErrorAlert(\"Failed to delete voucher\", err);\r\n        });\r\n      }\r\n\r\n    private saveGiftVoucher = async () => {\r\n        let isValid: boolean = true;\r\n\r\n        // code\r\n        if (this.state.code.length === 0 || this.state.code.length > 20) {\r\n            this.setState({\r\n                codeError: \"Code must be between 1 and 20 characters\"\r\n            });\r\n            isValid = false;\r\n        }\r\n\r\n        // value\r\n        if (parseFloat(this.state.value) <= 0) {\r\n            this.setState({\r\n                valueError: \"Value must be greater than 0\"\r\n            });\r\n            isValid = false;\r\n        }\r\n\r\n        if (isValid) {\r\n            const swalResponse: any = await swal({\r\n               icon: \"warning\",\r\n               title: \"Are you sure?\",\r\n               text: \"This will create a new voucher\",\r\n               dangerMode: true,\r\n               buttons: [\"Cancel\", \"Create\"] \r\n            });\r\n\r\n            if (!swalResponse) {\r\n                return;\r\n            }\r\n\r\n            this.setState({\r\n                isSaving: true\r\n            });\r\n            const url: string = `${getDataUrl()}/vouchers/gift`;\r\n\r\n            fetch(url, {\r\n                method: \"POST\",\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\"\r\n                },\r\n                body: JSON.stringify({\r\n                    value: this.state.value,\r\n                    code: this.state.code\r\n                })\r\n            })\r\n            .then(async (res) => {\r\n                if (res.status === 201) {\r\n                  this.props.fetchVouchers();\r\n                  this.setState({\r\n                    code: \"\",\r\n                    value: \"\"\r\n                  });\r\n                } else {\r\n                  const text: string = await res.text();\r\n                  showErrorAlert(\"Failed to save voucher\", text);\r\n                }\r\n              })\r\n              .catch(err => {\r\n                showErrorAlert(\"Failed to save voucher\", err);\r\n              })\r\n              .finally(() => {\r\n                this.setState({\r\n                  isSaving: false\r\n                });\r\n              });\r\n        }\r\n    }\r\n\r\n    private onBlurValue = (e: React.FocusEvent<HTMLInputElement>): void => {\r\n        const value: string = (e.target.validity.valid && e.target.value.length > 0 ? parseFloat(e.target.value) : 0).toFixed(2);\r\n\r\n        this.setState({...this.state, value, valueError: \"\"});\r\n    }\r\n\r\n    private updateValue = (e: React.ChangeEvent<HTMLInputElement>): void => {\r\n        this.setState({\r\n            value: e.target.value,\r\n            valueError: \"\"\r\n        });\r\n    }\r\n\r\n    private updateCode = (e: React.ChangeEvent<HTMLInputElement>): void => {\r\n        this.setState({\r\n            code: e.target.value,\r\n            codeError: \"\"\r\n        });\r\n    }\r\n}\r\n\r\nexport default GiftVoucherManagementTable;","import React from \"react\";\r\nimport { IGiftVoucher, IReduxState } from \"../../../App/index\";\r\nimport { fetchAllVouchers } from \"../redux/voucherActions\";\r\nimport { connect } from \"react-redux\";\r\nimport GiftVoucherManagementTable from \"../../../Components/GiftVoucherManagementTable\";\r\n\r\ninterface IGiftVoucherManagementDispatchProps {\r\n    fetchVouchers: () => void;\r\n}\r\n\r\ninterface IGiftVoucherManagementStateProps {\r\n    giftVouchers: IGiftVoucher[];\r\n    isFetchingVouchers: boolean;\r\n}\r\n\r\ntype IGiftVoucherManagementProps = IGiftVoucherManagementDispatchProps & IGiftVoucherManagementStateProps;\r\n\r\nfunction GiftVoucherManagement(props: IGiftVoucherManagementProps): JSX.Element {\r\n    return (\r\n        <div className=\"row mt-3\">\r\n            <div className=\"col-12\">\r\n                <div className=\"table-responsive\">\r\n                    <table className=\"table table-hover\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>Voucher Id</th>\r\n                                <th>Code</th>\r\n                                <th>Value (£)</th>\r\n                                <th></th>\r\n                            </tr>\r\n                        </thead>\r\n                        <GiftVoucherManagementTable\r\n                            fetchVouchers={props.fetchVouchers}\r\n                            giftVouchers={props.giftVouchers}\r\n                            isFetchingVouchers={props.isFetchingVouchers}\r\n                        />\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction mapStateToProps(state: IReduxState): IGiftVoucherManagementStateProps {\r\n    return {\r\n        giftVouchers: state.voucherState.vouchers.giftVouchers,\r\n        isFetchingVouchers: state.voucherState.isFetchingVouchers\r\n    };\r\n}\r\n\r\nfunction mapDispatchProps(dispatch: any): IGiftVoucherManagementDispatchProps {\r\n    return {\r\n        fetchVouchers: () => dispatch(fetchAllVouchers())\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchProps)(GiftVoucherManagement);","import React, { useEffect } from \"react\";\r\nimport { Link, Switch, Route, NavLink } from \"react-router-dom\";\r\nimport { IGiftVoucher, IOfferVoucher, IReduxState } from \"../../App/index\";\r\nimport { fetchAllVouchers } from \"./redux/voucherActions\";\r\nimport { connect } from \"react-redux\";\r\nimport OfferVoucherManagement from \"./Offer/OfferVoucherManagement\";\r\nimport GiftVoucherManagement from \"./Gift/GiftVoucherManagement\";\r\n\r\ninterface IDispatchProps {\r\n  fetchAllVouchers: () => void;\r\n}\r\n\r\ninterface IStateProps {\r\n  giftVouchers: IGiftVoucher[];\r\n  offerVouchers: IOfferVoucher[];\r\n}\r\n\r\ntype IProps = IDispatchProps & IStateProps;\r\n\r\nfunction VoucherManagement(props: IProps): JSX.Element {\r\n  useEffect(() => {\r\n    props.fetchAllVouchers();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"row\">\r\n      <div className=\"col-12\">\r\n        <div className=\"card-box\">\r\n          <ul className=\"nav nav-tabs tabs-bordered\">\r\n            <li className=\"nav-item\">\r\n              <NavLink to=\"/voucher-management/offer\" className=\"nav-link\">OFFER VOUCHERS</NavLink>\r\n            </li>\r\n            <li className=\"nav-item\">\r\n              <NavLink to=\"/voucher-management/gift\" className=\"nav-link\">GIFT VOUCHERS</NavLink>\r\n            </li>\r\n          </ul>\r\n          <div className=\"row mt-3\">\r\n            <div className=\"col-12\">\r\n              <button className=\"btn btn-secondary\" onClick={props.fetchAllVouchers}>Refresh</button>\r\n            </div>\r\n          </div>\r\n          <Switch>\r\n            <Route exact={true} path=\"/voucher-management/offer\" component={OfferVoucherManagement} />\r\n            <Route exact={true} path=\"/voucher-management/gift\" component={GiftVoucherManagement} />\r\n          </Switch>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction mapStateToProps(state: IReduxState): IStateProps {\r\n  return {\r\n    giftVouchers: state.voucherState.vouchers.giftVouchers,\r\n    offerVouchers: state.voucherState.vouchers.offerVouchers\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: any): IDispatchProps {\r\n  return {\r\n    fetchAllVouchers: () => dispatch(fetchAllVouchers())\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(VoucherManagement);","import React from \"react\";\r\nimport { ISubsetGroup } from \"../App/index\";\r\nimport history from \"../App/history\";\r\n\r\ninterface ISubsetManagementTableProps {\r\n  subsets: ISubsetGroup[];\r\n}\r\n\r\ninterface ISubsetManagementTableRowProps {\r\n  subsetId: number;\r\n  name: string;\r\n  items: string[];\r\n}\r\n\r\nfunction SubsetManagementTableRow(props: ISubsetManagementTableRowProps): JSX.Element {\r\n  return (\r\n    <tr onClick={() => history.push(`/subset-management/edit/${props.subsetId}`)} style={{cursor: \"pointer\"}}>\r\n      <td>{props.subsetId}</td>\r\n      <td>{props.name}</td>\r\n      <td>{props.items.length === 0 ? \"-\" : props.items.join(\", \")}</td>\r\n    </tr>\r\n  );\r\n}\r\n\r\nfunction SubsetManagementTable(props: ISubsetManagementTableProps): JSX.Element {\r\n  return (\r\n    <div className=\"row\">\r\n      <div className=\"col-12\">\r\n        <div className=\"table-responsive mt-3\">\r\n          <table className=\"table table-hover\">\r\n            <thead>\r\n              <tr>\r\n                <th>Subset Id</th>\r\n                <th>Name</th>\r\n                <th>Items</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {\r\n                props.subsets.map((subset, i) =>\r\n                  <SubsetManagementTableRow\r\n                    subsetId={subset.subsetId}\r\n                    key={i}\r\n                    name={subset.name}\r\n                    items={subset.items.map(item => item.name)}\r\n                  />\r\n                )\r\n              }\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SubsetManagementTable;","import React from \"react\";\r\nimport { IListingState } from \"../App/index\";\r\n\r\ninterface ISubsetEditForm {\r\n  form: {\r\n    name: string;\r\n    itemIds: number[];\r\n    subsetId: number;\r\n  };\r\n  listings: IListingState[];\r\n  isFetchingListings: boolean;\r\n  formChanged: (name: string, itemIds: number[]) => void;\r\n  readonly: boolean;\r\n}\r\n\r\ninterface ISubsetEditFormState {\r\n  form: {\r\n    name: string;\r\n    itemIds: number[];\r\n  };\r\n  nameError: string;\r\n}\r\n\r\nclass SubsetEditForm extends React.PureComponent<ISubsetEditForm, ISubsetEditFormState> {\r\n  public constructor(props: ISubsetEditForm) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      form: {\r\n        itemIds: props.form.itemIds,\r\n        name: props.form.name\r\n      },\r\n      nameError: \"\"\r\n    };\r\n\r\n    this.removeItem.bind(this);\r\n    this.addItem.bind(this);\r\n  }\r\n\r\n  public componentWillReceiveProps(nextProps: ISubsetEditForm) {\r\n    if (this.props.form.subsetId !== nextProps.form.subsetId) {\r\n      this.setState({\r\n        form: {\r\n          name: nextProps.form.name,\r\n          itemIds: nextProps.form.itemIds\r\n        },\r\n        nameError: \"\"\r\n      });\r\n    }\r\n  }\r\n\r\n  public validateForm = (): boolean => {\r\n    let isValid: boolean = true;\r\n\r\n    // name\r\n    if (this.state.form.name.length === 0 || this.state.form.name.length > 50) {\r\n      this.setState({\r\n        nameError: \"Name must be between 1 and 50 characters\"\r\n      });\r\n      isValid = false;\r\n    }\r\n\r\n    return isValid;\r\n  }\r\n\r\n  public render(): JSX.Element {\r\n    return (\r\n      <form className=\"mt-3\" onBlur={this.updateForm}>\r\n        <div className=\"row\">\r\n          <div className=\"col-12\">\r\n            <label>Name *</label>\r\n            <input\r\n              type=\"text\"\r\n              maxLength={50}\r\n              className=\"form-control\"\r\n              readOnly={this.props.readonly}\r\n              value={this.state.form.name}\r\n              style={{\r\n                maxWidth: \"350px\"\r\n              }}\r\n              onChange={this.updateName}\r\n            />\r\n            {\r\n              this.state.nameError.length > 0 &&\r\n              <p className=\"text-danger font-13 mb-0\">{this.state.nameError}</p>\r\n            }\r\n          </div>\r\n          <div className=\"col-12 mt-3\">\r\n            <label>Items</label>\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              readOnly={this.props.readonly}\r\n              style={{\r\n                maxWidth: \"350px\"\r\n              }}\r\n              list=\"subsetItemsDl\"\r\n              onChange={this.addItem}\r\n            />\r\n            <datalist id=\"subsetItemsDl\">\r\n              {\r\n                this.props.listings.filter(i => this.props.form.itemIds.indexOf(i.itemId) === -1).map((item, i) =>\r\n                  <option key={i} value={item.name}>{item.itemId}</option>\r\n                )\r\n              }\r\n            </datalist>\r\n            <table className=\"table table-sm mt-3\" style={{maxWidth: \"350px\"}}>\r\n              <thead>\r\n                <tr>\r\n                  <th>Item Id</th>\r\n                  <th>Name</th>\r\n                  <th></th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {\r\n                  this.props.listings.filter(i => this.state.form.itemIds.indexOf(i.itemId) > -1).map((item, i) =>\r\n                    <tr key={i}>\r\n                      <td>{item.itemId}</td>\r\n                      <td>{item.name}</td>\r\n                      <td>\r\n                        <button\r\n                          className=\"btn btn-link\"\r\n                          style={{\r\n                            padding: \"0px\"\r\n                          }}\r\n                          disabled={this.props.readonly}\r\n                          onClick={() => this.removeItem(item.itemId)}\r\n                        >Remove</button>\r\n                      </td>\r\n                    </tr>\r\n                  )\r\n                }\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n\r\n  private addItem = (e: React.ChangeEvent<HTMLInputElement>): void => {\r\n    const item: IListingState | undefined = this.props.listings.find(i => i.name === e.target.value);\r\n    if (item == null) {\r\n      return;\r\n    }\r\n    const itemIds: number[] = this.state.form.itemIds.slice();\r\n    itemIds.push(item.itemId);\r\n    this.setState({...this.state, form: {...this.state.form, itemIds }});\r\n    e.target.value = \"\";\r\n\r\n    this.props.formChanged(this.state.form.name, itemIds);\r\n  }\r\n\r\n  private removeItem = (id: number): void => {\r\n    const itemIds: number[] = this.state.form.itemIds.slice().filter(i => i !== id);\r\n    this.setState({...this.state, form: {...this.state.form, itemIds }});\r\n\r\n    this.props.formChanged(this.state.form.name, itemIds);\r\n  }\r\n\r\n  private updateForm = (): void => {\r\n    this.props.formChanged(this.state.form.name, this.state.form.itemIds);\r\n  }\r\n\r\n  private updateName = (e: React.ChangeEvent<HTMLInputElement>): void => {\r\n    this.setState({...this.state, form: {...this.state.form, name: e.target.value}, nameError: \"\"});\r\n  }\r\n}\r\n\r\nexport default SubsetEditForm;","import { IListingState, IReduxState, ISubsetGroup } from \"../../../App/index\";\r\nimport PageTitle from \"../../../Layout/PageTitle/PageTitle\";\r\nimport { useState, useEffect } from \"react\";\r\nimport React from \"react\";\r\nimport { fetchAllListings } from \"../../Store/Listings/redux/listingsActions\";\r\nimport { fetchAllSubsets, updateNewSubsetFormState } from \"../redux/subsetActions\";\r\nimport { connect } from \"react-redux\";\r\nimport swal from \"sweetalert\";\r\nimport getDataUrl from \"../../../App/common/proxy\";\r\nimport history from \"../../../App/history\";\r\nimport showErrorAlert from \"../../../App/common/errorMessage\";\r\nimport SubsetEditForm from \"../../../Components/SubsetEditForm\";\r\n\r\ninterface INewSubsetDispatchProps {\r\n  updateNewSubsetForm: (name: string, itemIds: number[]) => void;\r\n  fetchAllItems: () => void;\r\n  fetchAllSubsets: () => void;\r\n}\r\n\r\ninterface INewSubsetStateProps {\r\n  name: string;\r\n  itemIds: number[];\r\n  isFetchingItems: boolean;\r\n  listings: IListingState[];\r\n}\r\n\r\ntype INewSubsetProps = INewSubsetDispatchProps & INewSubsetStateProps;\r\n\r\nfunction NewSubset(props: INewSubsetProps): JSX.Element {\r\n  const formRef: React.RefObject<SubsetEditForm> = React.createRef();\r\n  const [isSaving, setIsSaving] = useState(false);\r\n\r\n  useEffect(() => {\r\n    props.fetchAllItems();\r\n  }, []);\r\n\r\n  function handleFormChange(name: string, itemIds: number[]): void {\r\n    props.updateNewSubsetForm(name, itemIds);\r\n  }\r\n\r\n  async function onSave(): Promise<void> {\r\n    if (formRef.current) {\r\n      if (!formRef.current.validateForm()) {\r\n        return;\r\n      }\r\n    }\r\n\r\n    const swalResponse: any = await swal({\r\n      icon: \"warning\",\r\n      title: \"Are you sure?\",\r\n      text: \"This will create a new item subset.\",\r\n      dangerMode: true,\r\n      buttons: [\"Cancel\", \"Create\"]\r\n    });\r\n\r\n    if (swalResponse === true) {\r\n      setIsSaving(true);\r\n\r\n      const url: string = `${getDataUrl()}/subsets`;\r\n      await fetch(url, {\r\n        method: \"POST\",\r\n        body: JSON.stringify({\r\n          name: props.name,\r\n          itemIds: props.itemIds\r\n        }),\r\n        headers: {\r\n          \"Content-Type\": \"application/json\"\r\n        }\r\n      })\r\n      .then(async (res) => {\r\n        if (res.status === 201) {\r\n          props.updateNewSubsetForm(\"\", []);\r\n          props.fetchAllSubsets();\r\n          history.push(\"/subset-management\");\r\n        } else {\r\n          const text: string = await res.text();\r\n          showErrorAlert(\"Couldn't save item\", text);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        showErrorAlert(\"Couldn't save item\", err);\r\n      })\r\n      .finally(() => {\r\n        setIsSaving(false);\r\n      });\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"card-box\">\r\n      <PageTitle\r\n        title=\"NEW SUBSET\"\r\n      />\r\n      <SubsetEditForm\r\n        ref={formRef}\r\n        form={{\r\n          name: props.name,\r\n          itemIds: props.itemIds,\r\n          subsetId: -1\r\n        }}\r\n        listings={props.listings}\r\n        isFetchingListings={props.isFetchingItems}\r\n        formChanged={handleFormChange}\r\n        readonly={isSaving}\r\n      />\r\n      <button\r\n        className=\"btn btn-info mt-3\"\r\n        disabled={isSaving}\r\n        onClick={onSave}\r\n      >\r\n        {isSaving ? \"Saving...\" : \"Save Subset\"}\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction mapStateToProps(state: IReduxState): INewSubsetStateProps {\r\n  return {\r\n    itemIds: state.subsetState.newSubsetState.itemIds,\r\n    name: state.subsetState.newSubsetState.name,\r\n    isFetchingItems: state.listingsState.isFetchingListings,\r\n    listings: state.listingsState.listings\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: any): INewSubsetDispatchProps {\r\n  return {\r\n    fetchAllItems: () => dispatch(fetchAllListings()),\r\n    fetchAllSubsets: () => dispatch(fetchAllSubsets()),\r\n    updateNewSubsetForm: (name: string, itemIds: number[]) =>\r\n      dispatch(updateNewSubsetFormState(name, itemIds))\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(NewSubset);","import React from \"react\";\r\nimport { IListingState, ISubsetGroup, IReduxState } from \"../../../App/index\";\r\nimport { RouteComponentProps } from \"react-router\";\r\nimport { fetchAllSubsets } from \"../redux/subsetActions\";\r\nimport { fetchAllListings } from \"../../Store/Listings/redux/listingsActions\";\r\nimport { connect } from \"react-redux\";\r\nimport history from \"../../../App/history\";\r\nimport PageTitle from \"../../../Layout/PageTitle/PageTitle\";\r\nimport SubsetEditForm from \"../../../Components/SubsetEditForm\";\r\nimport swal from \"sweetalert\";\r\nimport getDataUrl from \"../../../App/common/proxy\";\r\nimport showErrorAlert from \"../../../App/common/errorMessage\";\r\n\r\ninterface IEditSubsetDispatchProps {\r\n  fetchAllListings: () => void;\r\n  fetchAllSubsets: () => void;\r\n}\r\n\r\ninterface IEditSubsetUrlProps {\r\n  subsetId: string;\r\n}\r\n\r\ninterface IEditSubsetStateProps {\r\n  listings: IListingState[];\r\n  subsets: ISubsetGroup[];\r\n  isFetchingListings: boolean;\r\n}\r\n\r\ntype IEditSubsetProps = IEditSubsetDispatchProps & RouteComponentProps<IEditSubsetUrlProps> & IEditSubsetStateProps;\r\n\r\ninterface IEditSubsetState {\r\n  form: {\r\n    name: string;\r\n    itemIds: number[];\r\n  };\r\n  isEditing: boolean;\r\n  isSaving: boolean;\r\n  isDeleting: boolean;\r\n}\r\n\r\nclass EditSubset extends React.PureComponent<IEditSubsetProps, IEditSubsetState> {\r\n  private formRef: React.RefObject<SubsetEditForm> = React.createRef();\r\n  public constructor(props: IEditSubsetProps) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      form: {\r\n        itemIds: [],\r\n        name: \"\"\r\n      },\r\n      isDeleting: false,\r\n      isEditing: false,\r\n      isSaving: false\r\n    };\r\n  }\r\n\r\n  public componentDidMount() {\r\n    this.props.fetchAllListings();\r\n  }\r\n\r\n  public componentWillReceiveProps(nextProps: IEditSubsetProps) {\r\n    if (this.props.match.params.subsetId !== nextProps.match.params.subsetId) {\r\n      this.setState({\r\n        isEditing: false,\r\n        isSaving: false,\r\n        isDeleting: false\r\n      });\r\n    }\r\n  }\r\n\r\n  public render(): JSX.Element {\r\n    const subset: ISubsetGroup | undefined = this.props.subsets.find(s => s.subsetId.toString() === this.props.match.params.subsetId);\r\n\r\n    if (subset == null) {\r\n      history.push(\"/subset-management\");\r\n      return <></>;\r\n    }\r\n\r\n    return (\r\n      <div className=\"card-box\">\r\n        <PageTitle\r\n          title={\"EDIT SUBSET (SUBSET ID: \" + this.props.match.params.subsetId + \")\"}\r\n        />\r\n        <SubsetEditForm\r\n          ref={this.formRef}\r\n          isFetchingListings={this.props.isFetchingListings}\r\n          listings={this.props.listings}\r\n          form={{\r\n            itemIds: subset.items.map(i => i.itemId),\r\n            name: subset.name,\r\n            subsetId: subset.subsetId\r\n          }}\r\n          formChanged={this.handleFormChange}\r\n          readonly={!this.state.isEditing || this.state.isSaving}\r\n        />\r\n        {\r\n          this.state.isEditing &&\r\n          (\r\n            <>\r\n              <button\r\n                className=\"btn btn-info mt-3\"\r\n                onClick={this.updateSubset}\r\n                disabled={this.state.isSaving}\r\n              >{this.state.isSaving ? \"Saving...\" : \"Update Subset\"}</button>\r\n            </>\r\n          )\r\n        }\r\n        {\r\n          !this.state.isEditing &&\r\n          <>\r\n            <button\r\n              className=\"btn btn-primary mt-3\"\r\n              onClick={() => this.setState({isEditing: true})}\r\n            >Edit Subset</button>\r\n            <button\r\n              className=\"btn btn-danger mt-3 ml-3\"\r\n              onClick={this.deleteSubset}\r\n            >\r\n              Delete Subset\r\n            </button>\r\n          </>\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private deleteSubset = async(): Promise<void> => {\r\n    const swalResponse: any = await swal({\r\n      icon: \"warning\",\r\n      title: \"Are you sure?\",\r\n      text: \"This will permanently delete this subset\",\r\n      dangerMode: true,\r\n      buttons: [\"Cancel\", \"Delete\"]\r\n    });\r\n\r\n    if (swalResponse === true) {\r\n      this.setState({\r\n        isDeleting: true\r\n      });\r\n\r\n      const url: string = `${getDataUrl()}/subsets/${this.props.match.params.subsetId}`;\r\n      await fetch(url, {\r\n        method: \"DELETE\"\r\n      })\r\n      .then(async (res) => {\r\n        if (res.status === 200) {\r\n          this.props.fetchAllSubsets();\r\n          history.push(\"/subset-management\");\r\n        } else {\r\n          const text: string = await res.text();\r\n          showErrorAlert(\"Couldn't delete subset\", text);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        showErrorAlert(\"Couldn't delete subset\", err);\r\n      })\r\n      .finally(() => {\r\n        this.setState({\r\n          isDeleting: false\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  private updateSubset = async(): Promise<void> => {\r\n    if (this.formRef.current && this.formRef.current.validateForm()) {\r\n      const swalResponse: any = await swal({\r\n        icon: \"warning\",\r\n        title: \"Are you sure?\",\r\n        text: \"This will update the selected subset\",\r\n        dangerMode: true,\r\n        buttons: [\"Cancel\", \"Update\"]\r\n      });\r\n\r\n      if (swalResponse === true) {\r\n        this.setState({\r\n          isSaving: true\r\n        });\r\n\r\n        const url: string = `${getDataUrl()}/subsets/${this.props.match.params.subsetId}`;\r\n        await fetch(url, {\r\n          method: \"PUT\",\r\n          body: JSON.stringify({\r\n            name: this.state.form.name,\r\n            itemIds: this.state.form.itemIds\r\n          }),\r\n          headers: {\r\n            \"Content-Type\": \"application/json\"\r\n          }\r\n        })\r\n        .then(async (res) => {\r\n          if (res.status === 200) {\r\n            this.props.fetchAllSubsets();\r\n            history.push(\"/subset-management\");\r\n          } else {\r\n            const text: string = await res.text();\r\n            showErrorAlert(\"Couldn't save subset\", text);\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          showErrorAlert(\"Couldn't save subset\", err);\r\n        })\r\n        .finally(() => {\r\n          this.setState({\r\n            isSaving: false\r\n          });\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  private handleFormChange = (name: string, itemIds: number[]): void => {\r\n    this.setState({\r\n      ...this.state,\r\n      form: {...this.state.form, name, itemIds}\r\n    });\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state: IReduxState): IEditSubsetStateProps {\r\n  return {\r\n    isFetchingListings: state.listingsState.isFetchingListings,\r\n    listings: state.listingsState.listings,\r\n    subsets: state.subsetState.subsets\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: any): IEditSubsetDispatchProps {\r\n  return {\r\n    fetchAllListings: () => dispatch(fetchAllListings()),\r\n    fetchAllSubsets: () => dispatch(fetchAllSubsets())\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(EditSubset);","import React, { useEffect } from \"react\";\r\nimport PageTitle from \"../../Layout/PageTitle/PageTitle\";\r\nimport { Link, Switch, Route } from \"react-router-dom\";\r\nimport SubsetManagementTable from \"../../Components/SubsetManagementTable\";\r\nimport { ISubsetGroup, IReduxState } from \"../../App/index\";\r\nimport { fetchAllSubsets } from \"./redux/subsetActions\";\r\nimport { connect } from \"react-redux\";\r\nimport NewSubset from \"./New/NewSubset\";\r\nimport EditSubset from \"./Edit/EditSubset\";\r\n\r\ninterface ISubsetManagementDispatchProps {\r\n  fetchAllSubsets: () => void;\r\n}\r\n\r\ninterface ISubsetManagementStateProps {\r\n  subsets: ISubsetGroup[];\r\n  isFetchingSubsets: boolean;\r\n}\r\n\r\ntype ISubsetManagementProps = ISubsetManagementStateProps & ISubsetManagementDispatchProps;\r\n\r\nfunction SubsetsManagement(props: ISubsetManagementProps): JSX.Element {\r\n  useEffect(() => {\r\n    props.fetchAllSubsets();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"row\">\r\n      <div className=\"col-xl-8 col-lg-6\">\r\n        <div className=\"card-box\">\r\n          <PageTitle\r\n            title=\"ITEM SUBSETS\"\r\n          />\r\n          <div className=\"row\">\r\n            <div className=\"col-12\">\r\n              <Link to=\"/subset-management/new\" className=\"btn btn-info mt-3\">New Subset</Link>\r\n              <button className=\"btn btn-secondary mt-3 float-right\" onClick={props.fetchAllSubsets}>Refresh</button>\r\n            </div>\r\n          </div>\r\n          <SubsetManagementTable\r\n            subsets={props.subsets}\r\n          />\r\n        </div>\r\n      </div>\r\n      <div className=\"col-lg-6 col-xl-4\">\r\n        <Switch>\r\n          <Route exact={true} path=\"/subset-management/new\" component={NewSubset} />\r\n          <Route path=\"/subset-management/edit/:subsetId\" component={EditSubset} />\r\n        </Switch>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction mapStateToProps(state: IReduxState): ISubsetManagementStateProps {\r\n  return {\r\n    isFetchingSubsets: state.subsetState.isFetchingSubsets,\r\n    subsets: state.subsetState.subsets\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: any): ISubsetManagementDispatchProps {\r\n  return {\r\n    fetchAllSubsets: () => dispatch(fetchAllSubsets())\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SubsetsManagement);","import React, { Component } from \"react\";\nimport SideBar from \"./Layout/SideBar/SideBar\";\nimport BreadcrumbBar from \"./Layout/BreadcrumbBar/BreadcrumbBar\";\nimport \"./App/assets/css/bootstrap.min.css\";\nimport \"./App/assets/css/style.css\";\nimport \"./App/assets/fonts/fontawesome-webfont.svg\";\nimport { Switch, Route, Redirect } from \"react-router-dom\";\nimport Store from \"./Views/Store/Store\";\nimport Checkout from \"./Views/Checkout/Checkout\";\nimport { ICartListingState } from \"./App/index\";\nimport { updateCart } from \"./Views/Store/Cart/redux/cartActions\";\nimport { getCartCookie } from \"./App/common/cookieManager\";\nimport { connect } from \"react-redux\";\nimport ItemManagement from \"./Views/ItemManagement/ItemManagement\";\nimport VoucherManagement from \"./Views/VoucherManagement/VoucherManagement\";\nimport SubSetsManagement from \"./Views/SubsetsManagement/SubsetsManagement\";\n\ninterface IAppDispatchProps {\n  setCart: (cartItems: ICartListingState[]) => void;\n}\n\ntype IAppProps = IAppDispatchProps;\n\nclass App extends Component<IAppProps> {\n  public componentDidMount(): void {\n    const cartListings: ICartListingState[] = getCartCookie();\n    this.props.setCart(cartListings);\n  }\n\n  public render(): JSX.Element {\n    return (\n      <div id=\"wrapper\">\n        <SideBar />\n        <div className=\"content-page\">\n          <div\n            className=\"content\"\n            style={{\n              marginTop: \"0px\"\n            }}\n          >\n            <div className=\"container-fluid\">\n              <BreadcrumbBar />\n              <Switch>\n                <Route path=\"/subset-management\" component={SubSetsManagement} />\n                <Route path=\"/item-management\" component={ItemManagement} />\n                <Redirect exact={true} from=\"/voucher-management\" to=\"/voucher-management/offer\" />\n                <Route path=\"/voucher-management\" component={VoucherManagement} />\n                <Route exact={true} path=\"/checkout\" component={Checkout} />\n                <Route exact={true} path=\"/\" component={Store} />\n              </Switch>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction mapDispatchToProps(dispatch: any): IAppDispatchProps {\n  return {\n    setCart: (items: ICartListingState[]) => dispatch(updateCart(items))\n  };\n}\n\nexport default connect(null, mapDispatchToProps)(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport { Router } from \"react-router-dom\";\nimport history from \"./App/history\";\nimport { Provider } from \"react-redux\";\nimport { ReduxStore } from \"./App/redux/store\";\n\nReactDOM.render(\n  <Provider store={ReduxStore}>\n    <Router history={history}>\n      <App />\n    </Router>\n  </Provider>,\n  document.getElementById(\"root\") as HTMLElement\n);\n\n// if you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();"],"sourceRoot":""}